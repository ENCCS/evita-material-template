<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html">
        <link rel="prefetch" href="_static/evita-logo-light.png" as="image">
        <link rel="prefetch" href="_static/evita-logo-dark.png" as="image">

    <link rel="shortcut icon" href="_static/evita-150x150.png"><!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>High Performance Data Analytics in Python</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_lesson.css?v=0c089442" />
    <link rel="stylesheet" type="text/css" href="_static/term_role_formatting.css?v=4194e21c" />
    <link rel="stylesheet" type="text/css" href="_static/furo_ext_lesson.css?v=685c8e98" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">High Performance Data Analytics in Python</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/evita-logo-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/evita-logo-dark.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">High Performance Data Analytics in Python</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Software setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-0-SoftwareSetup">Setting Up Programming Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-1-Motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing">Efficient Array Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing-markdown">Efficient Array Computing (in Markdown)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing-pdf">Efficient Array Computing (in PDF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/quiz/quiz_in_episodes">Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/ModuleName-1-EpisodeName">Your title here</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-instructor-guide">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-reference-for-learners">Reference for learners</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Walkthrough for module authors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-reference/structure-evita-module">Structure of an EVITA module</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="high-performance-data-analytics-in-python">
<h1>High Performance Data Analytics in Python<a class="headerlink" href="#high-performance-data-analytics-in-python" title="Link to this heading">¶</a></h1>
<p>Scientists, engineers and professionals from many sectors are seeing an enormous growth in the size and number of datasets relevant to their domains. Professional titles have emerged to describe specialists working with data, such as data scientists and data engineers, but also other experts are finding it necessary to learn tools and techniques to work with big data. Typical tasks include preprocessing, analysing, modeling and visualising data.</p>
<p>Python is an industry-standard programming language for working with data on all levels of the data analytics pipeline. This is in large part because of the rich ecosystem of libraries ranging from generic numerical libraries to special-purpose and/or domain-specific packages, often supported by large developer communities and stable funding sources.</p>
<p>This module will give an overview of working with research data in Python using general libraries for storing, processing, analysing and sharing data. The focus is on high performance. After covering tools for performant processing on single workstations the focus shifts to profiling and optimising, parallel and distributed computing.</p>
<div class="admonition-prerequisites prerequisites admonition" id="prerequisites-0">
<p class="admonition-title">Prerequisites</p>
<ul class="simple">
<li><p>Basic experience with Python</p></li>
<li><p>Basic experience in working in a Linux-like terminal</p></li>
<li><p>Some prior experience in working with large or small datasets</p></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<span id="document-episodes/Python-HPDA-0-SoftwareSetup"></span><section id="setting-up-programming-environment">
<h2>Setting Up Programming Environment<a class="headerlink" href="#setting-up-programming-environment" title="Link to this heading">¶</a></h2>
<p>In order to run hands-on exercises in this course, you need the Python package and several depenencies.</p>
<ul class="simple">
<li><p>If you use your own computer to run exercises, you should follow the instructions described below to install relevant packages and setup specific programming environment before running hands-on exercises.</p></li>
<li><p>You can use an HPC cluster if you have access to one to run hands-on exercises. Below we provide a short description to login to the <a class="reference external" href="https://www.lumi.csc.fi/public/"><strong>LUMI</strong></a> cluster, load the modules, and run interactive/batch jobs.</p></li>
</ul>
<section id="local-installation">
<h3>Local Installation<a class="headerlink" href="#local-installation" title="Link to this heading">¶</a></h3>
<section id="install-miniforge">
<h4>Install miniforge<a class="headerlink" href="#install-miniforge" title="Link to this heading">¶</a></h4>
<p>If you already have a preferred way to manage Python versions and libraries, you can stick to that. If not, we recommend that you install Python3 and all libraries using Miniforge, a free minimal installer for the package, dependency and environment manager conda.</p>
<p>Please follow the <a class="reference external" href="https://conda-forge.org/download/">installation instructions</a> to install Miniforge.</p>
<p>Make sure that conda is correctly installed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda<span class="w"> </span>--version
<span class="go">conda 24.11.2</span>
</pre></div>
</div>
</section>
<section id="install-python-programming-environment-on-personal-computer">
<h4>Install python programming environment on personal computer<a class="headerlink" href="#install-python-programming-environment-on-personal-computer" title="Link to this heading">¶</a></h4>
<p><strong>For Mac users</strong></p>
<p>With conda installed, install the required dependencies by running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--yes<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/ENCCS/hpda-python/main/content/env/environment.yml
</pre></div>
</div>
<p>This will create a new environment pyhpda which you need to activate by:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda<span class="w"> </span>activate<span class="w"> </span>pyhpda
</pre></div>
</div>
<p>Ensure that the Python version is fairly recent:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>--version
<span class="go">Python 3.12.8</span>
</pre></div>
</div>
<p>Finally, open Jupyter-Lab in your browser:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>jupyter-lab
</pre></div>
</div>
<p>If you use VS code, you can come to the installed <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment via choosing <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">Kernel</span></code> ar the upper right corner, <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">Environents</span></code> and you will find the pre-installed <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment.</p>
<p><strong>For Linux users</strong></p>
<p>Please provide detailed instructures for linux users to install packages.</p>
<p><strong>For Windows users</strong></p>
<p>Please provide detailed instructures for windows users to install packages.</p>
</section>
</section>
<section id="using-hpc-cluster">
<h3>Using HPC Cluster<a class="headerlink" href="#using-hpc-cluster" title="Link to this heading">¶</a></h3>
<section id="lumi">
<h4>LUMI<a class="headerlink" href="#lumi" title="Link to this heading">¶</a></h4>
<section id="login-to-lumi-cluster">
<h5>Login to LUMI cluster<a class="headerlink" href="#login-to-lumi-cluster" title="Link to this heading">¶</a></h5>
<p>Follow practical instructions <a class="reference external" href="https://enccs.se/tutorials/2024/02/log-in-to-lumi-cluster/"><strong>HERE</strong></a> to get your access to LUMI cluster.</p>
<ul class="simple">
<li><p>On Step 5, you can login to LUMI cluster through terminal.</p></li>
<li><p>On Step 6, you can login to LUMI cluster from the web-interface.</p></li>
</ul>
</section>
<section id="running-jobs-on-lumi-cluster">
<h5>Running jobs on LUMI cluster<a class="headerlink" href="#running-jobs-on-lumi-cluster" title="Link to this heading">¶</a></h5>
<p>If you want to run an interactive job asking for 1 node, 1 GPU, and 1 hour:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>salloc<span class="w"> </span>-A<span class="w"> </span>project_XXXXX<span class="w"> </span>-N<span class="w"> </span><span class="m">1</span><span class="w"> </span>-t<span class="w"> </span><span class="m">1</span>:00:00<span class="w"> </span>-p<span class="w"> </span>standard-g<span class="w"> </span>--gpus-per-node<span class="o">=</span><span class="m">1</span>

<span class="gp">$ </span>srun<span class="w"> </span>&lt;some-command&gt;
</pre></div>
</div>
<p>Exit interactive allocation with <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<p>You can also submit your job with a batch script submit.sh:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -l</span>
<span class="c1">#SBATCH --account=project_XXXXX</span>
<span class="c1">#SBATCH --job-name=example-job</span>
<span class="c1">#SBATCH --output=examplejob.o%j</span>
<span class="c1">#SBATCH --error=examplejob.e%j</span>
<span class="c1">#SBATCH --partition=standard-g</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --gpus-per-node=1</span>
<span class="c1">#SBATCH --ntasks-per-node=1</span>
<span class="c1">#SBATCH --time=1:00:00</span>

srun<span class="w"> </span>&lt;some_command&gt;
</pre></div>
</div>
<p>Some useful commands are listed below:</p>
<ul class="simple">
<li><p>Submit the job: <code class="docutils literal notranslate"><span class="pre">sbatch</span> <span class="pre">submit.sh</span></code></p></li>
<li><p>Monitor your job: <code class="docutils literal notranslate"><span class="pre">squeue</span> <span class="pre">--me</span></code></p></li>
<li><p>Kill job: <code class="docutils literal notranslate"><span class="pre">scancel</span> <span class="pre">&lt;JOB_ID&gt;</span></code></p></li>
</ul>
</section>
<section id="using-pyhpda-programming-environment-on-lumi-cluster">
<h5>Using <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment on LUMI cluster<a class="headerlink" href="#using-pyhpda-programming-environment-on-lumi-cluster" title="Link to this heading">¶</a></h5>
<p>We have installed the <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment on LUMI. You can follow instructions below to activate it and login to LUMI cluster, either via terminal or through the web-interface.</p>
<p><strong>Login to LUMI cluster via terminal</strong> and then the commands below to check and activate the pyhpda environment.
You should get similar output as shown below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>/projappl/projecXXXXX10/miniconda3/bin/conda<span class="w"> </span>init

<span class="gp">$ </span><span class="nb">source</span><span class="w"> </span>~/.bashrc

<span class="gp">$ </span>which<span class="w"> </span>conda
<span class="go">/project/project_XXXXX/miniconda3/condabin/conda</span>

<span class="gp">$ </span>conda<span class="w"> </span>activate<span class="w"> </span>pyhpda

<span class="gp">$ </span>which<span class="w"> </span>python
<span class="go">/project/project_XXXXX/miniconda3/envs/pyhpda/bin/python</span>
</pre></div>
</div>
<p><strong>Login to LUMI cluster via <a class="reference internal" href="#"><span class="xref myst">web-interface</span></a></strong> and then select <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code> (not <code class="docutils literal notranslate"><span class="pre">Jupyter</span> <span class="pre">for</span> <span class="pre">courses</span></code>) icon for an interactive session, and provide the following values in the form to launch the jupyter lab app.</p>
<ul class="simple">
<li><p>Project: <code class="docutils literal notranslate"><span class="pre">project_XXXXX</span></code></p></li>
<li><p>Partition: <code class="docutils literal notranslate"><span class="pre">interactive</span></code></p></li>
<li><p>Number of CPU cores: <code class="docutils literal notranslate"><span class="pre">2</span></code></p></li>
<li><p>Time: <code class="docutils literal notranslate"><span class="pre">4:00:00</span></code></p></li>
<li><p>Working directory: <code class="docutils literal notranslate"><span class="pre">/projappl/project_XXXXX</span></code></p></li>
<li><p>Python: <code class="docutils literal notranslate"><span class="pre">Custom</span></code></p></li>
<li><p>Path to python: <code class="docutils literal notranslate"><span class="pre">/project/project_XXXXX/miniconda3/envs/pyhpda/bin/python</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> for <em>Enable system installed packages on venv creation</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> for Enable packages under <em>~/.local/lib on venv start</em></p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Launch</span></code> button, wait for minutes until your requested session was created.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Connect</span> <span class="pre">to</span> <span class="pre">Jupyter</span></code> button, and then select the Python kernel <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">3</span> <span class="pre">(venv)</span></code> for the created Jupyter notebooks.</p></li>
</ul>
</section>
</section>
<section id="leonardo-booster">
<h4>Leonardo Booster<a class="headerlink" href="#leonardo-booster" title="Link to this heading">¶</a></h4>
<section id="login-to-leonardo-booster-cluster">
<h5>Login to Leonardo Booster cluster<a class="headerlink" href="#login-to-leonardo-booster-cluster" title="Link to this heading">¶</a></h5>
<p>Follow instructions at <a class="reference external" href="https://enccs.se/news/2023/09/how-to-login-to-leonardo-supercomputer/">HERE</a> to get your access to Leonardo Booster cluster.</p>
</section>
<section id="running-jobs-on-leonardo-booster-cluster">
<h5>Running jobs on Leonardo Booster cluster<a class="headerlink" href="#running-jobs-on-leonardo-booster-cluster" title="Link to this heading">¶</a></h5>
<p>Here are instructions to run jobs on Leonardo Booster cluster</p>
<ul class="simple">
<li><p>xxx</p></li>
<li><p>xxx</p></li>
</ul>
</section>
<section id="using-pyhpda-programming-environment-on-leonardo-booster-cluster">
<h5>Using <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment on Leonardo Booster cluster<a class="headerlink" href="#using-pyhpda-programming-environment-on-leonardo-booster-cluster" title="Link to this heading">¶</a></h5>
<p>Here are instructions to install the <code class="docutils literal notranslate"><span class="pre">pyhpda</span></code> programming environment on Leonardo Booster cluster</p>
<ul class="simple">
<li><p>xxx</p></li>
<li><p>xxx</p></li>
</ul>
</section>
</section>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-episodes/Python-HPDA-1-Motivation"></span><section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">¶</a></h2>
<p>This episode provides a broad overview of this course and the main motivation to attend this course.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>What is big data</p></li>
<li><p>What is the Python programming environment and the ecosystem</p></li>
<li><p>What you will learn during this course</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>20 min teaching/type-along</p></li>
<li><p>0 min exercising</p></li>
</ul>
</div>
<section id="big-data">
<h3>Big Data<a class="headerlink" href="#big-data" title="Link to this heading">¶</a></h3>
<div class="admonition-how-large-is-your-data discussion important admonition" id="discussion-0">
<p class="admonition-title">How large is your data?</p>
<ul class="simple">
<li><p>How large is the data you are working with?</p></li>
<li><p>Are you experiencing performance bottlenecks when you try to analyse it?</p></li>
</ul>
</div>
<p>“Big data refers to data sets that are too large or complex to be dealt with by traditional data-processing application software. […] Big data analysis challenges include capturing data, data storage, data analysis, search, sharing, transfer, visualization, querying, updating, information privacy, and data source.” (from <a class="reference external" href="https://en.wikipedia.org/wiki/Big_data">Wikipedia</a>)</p>
<p>“Big data” is a current buzzword used heavily in the tech industry, but many scientific research communities are increasingly adopting high-throughput data production methods which lead to very large datasets. One driving force behind this development is the advent of powerful machine learning methods which enable researchers to derive novel scientific insights from large datasets. Another is the strong development of high performance computing (HPC) hardware and the accompanying development of software libraries and packages which can efficiently take advantage of the hardware.</p>
<p>This module focuses on high-performance data analytics (HPDA), a subset of high-performance computing which focuses on working with large data. The data can come from either computer models and simulations or from experiments and observations, and the goal is to preprocess, analyse and visualise it to generate scientific results.</p>
<p>The video shown below provide more descriptions of the big data.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%HTML</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">align</span><span class="o">=</span><span class="s">&quot;center&quot;</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- The following is the snippet exported directly from YouTube, as is --&gt;</span>
    <span class="p">&lt;</span><span class="nt">iframe</span> 
        <span class="na">width</span><span class="o">=</span><span class="s">&quot;560&quot;</span>
        <span class="na">height</span><span class="o">=</span><span class="s">&quot;315&quot;</span>
        <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://www.youtube.com/embed/qydP7cOH4qc&quot;</span>
        <span class="na">title</span><span class="o">=</span><span class="s">&quot;YouTube video player&quot;</span> 
        <span class="na">frameborder</span><span class="o">=</span><span class="s">&quot;0&quot;</span>
        <span class="na">allow</span><span class="o">=</span><span class="s">&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot;</span>
        <span class="na">referrerpolicy</span><span class="o">=</span><span class="s">&quot;strict-origin-when-cross-origin&quot;</span> 
        <span class="na">allowfullscreen</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div align="center">
<!-- The following is the snippet exported directly from YouTube, as is -->
    <iframe 
        width="560"
        height="315"
        src="https://www.youtube.com/embed/qydP7cOH4qc"
        title="YouTube video player" 
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin" 
        allowfullscreen>
    </iframe>
</div>
</div></div>
</div>
<div class="dropdown instructor-note admonition" id="instructor-note-1">
<p class="admonition-title">Instructor note</p>
<p>Alternative method to embed videos</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">YouTubeVideo</span>  

<span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;qydP7cOH4qc&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">560</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">315</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to embed local videos using <a class="reference external" href="https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html#IPython.display.Video">IPython.display.Video</a>.</p>
</div>
</section>
<section id="python">
<h3>Python<a class="headerlink" href="#python" title="Link to this heading">¶</a></h3>
<div class="admonition-discussion discussion important admonition" id="discussion-1">
<p class="admonition-title">Discussion</p>
<p><strong>Performance bottlenecks in Python</strong></p>
<ul class="simple">
<li><p>Have you ever written Python scripts that look something like the one below?</p></li>
<li><p>Compared to C/C++/Fortran, this for-loop will probably be orders of magnitude slower</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;mydata.dat&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">fields</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">fields</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">fields</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="c1"># some analysis with x, y and z</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Despite early design choices of the Python language which made it significantly slower than conventional HPC languages, a rich and growing ecosystem of open source libraries have established Python as an industry-standard programming language for working with data on all levels of the data analytics pipeline. These range from generic numerical libraries to special-purpose and/or domain-specific packages. This module is focused on introducing modern packages from the Python ecosystem to work with large data. Specifically, we will learn to use:</p>
<ul class="simple">
<li><p>Numpy</p></li>
<li><p>Scipy</p></li>
<li><p>Pandas</p></li>
<li><p>Xarray</p></li>
<li><p>Numba</p></li>
<li><p>Cython</p></li>
<li><p>multithreading</p></li>
<li><p>multiprocessing</p></li>
<li><p>Dask</p></li>
</ul>
</section>
<section id="what-you-will-learn">
<h3>What You Will Learn<a class="headerlink" href="#what-you-will-learn" title="Link to this heading">¶</a></h3>
<p>This module provides a broad overview of methods to work with large datasets using tools and libraries from the Python ecosystem. Since this field is fairly extensive we will not have time to go into much depth. Instead, the objective is to expose just enough details on each topic for you to get a good idea of the big picture and an understanding of what combination of tools and libraries will work well for your particular use case.</p>
<p>Specifically, <strong>this module covers</strong>:</p>
<ul class="simple">
<li><p>Tools for efficiently storing data and writing/reading data to/from disk</p></li>
<li><p>How to share datasets and mint digital object identifiers (DOI)</p></li>
<li><p>Main methods of efficiently working with tabular data and multidimensional arrays</p></li>
<li><p>How to measure performance and boost performance of time consuming Python functions</p></li>
<li><p>Various methods to parallelise Python code</p></li>
</ul>
<p>This module does not cover the following topics which may be of interest to the reader. Please refer to the links provided below to the other course materials.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://enccs.github.io/gpu-programming/">Visualisation techniques</a></p></li>
<li><p><a class="reference external" href="https://enccs.github.io/gpu-programming/">Machine learning</a></p></li>
<li><p><a class="reference external" href="https://enccs.github.io/gpu-programming/">GPU programming</a></p></li>
</ul>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>Datasets are getting larger across nearly all scientific and engineering domains</p></li>
<li><p>The Python ecosystem has many libraries and packages for working with big data efficiently</p></li>
</ul>
</div>
</section>
</section>
<span id="document-episodes/Python-HPDA-2-EfficientArrayComputing"></span><section id="efficient-array-computing">
<h2>Efficient Array Computing<a class="headerlink" href="#efficient-array-computing" title="Link to this heading">¶</a></h2>
<p>This episode introduces how to write high-performance numerical code in Python packages (Numpy, Pandas, and Scipy) by leveraging tools and libraries designed to optimize computation speed and memory usage. It explores strategies such as vectorization with NumPy, just-in-time compilation using Numba, and parallelization techniques that can significantly reduce execution time. These methods help Python developers overcome the traditional performance limitations of the language, making it suitable for intensive scientific and engineering applications.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand limitations of Python’s standard library for large data processing</p></li>
<li><p>Understand the logic behind NumPy ndarrays and learn to use some NumPy numerical computing tools</p></li>
<li><p>Learn to use data structures and analysis tools from Panda</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>25 min teaching/type-along</p></li>
<li><p>25 min exercising</p></li>
</ul>
</div>
<section id="why-can-python-be-slow">
<h3>Why can Python be slow?<a class="headerlink" href="#why-can-python-be-slow" title="Link to this heading">¶</a></h3>
<p>Computer programs are nowadays practically always written in a high-level human readable programming language and then translated to the actual machine instructions that a processor understands. There are two main approaches for this translation:</p>
<ul class="simple">
<li><p>For <strong>compiled</strong> programming languages, the translation is done by a compiler before the execution of the program</p></li>
<li><p>For <strong>interpreted</strong> languages, the translation is done by an interpreter during the execution of the program</p></li>
</ul>
</section>
<section id="numpy">
<h3>NumPy<a class="headerlink" href="#numpy" title="Link to this heading">¶</a></h3>
<p>NumPy is based on well-optimized C code, which gives much better performace than regular Python. In particular, by using homogeneous data structures, NumPy <em>vectorizes</em> mathematical operations where fast pre-compiled code can be applied to a sequence of data instead of using traditional <code class="docutils literal notranslate"><span class="pre">for</span></code> loops.</p>
<section id="arrays">
<h4>Arrays<a class="headerlink" href="#arrays" title="Link to this heading">¶</a></h4>
<p>The core of NumPy is the NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> (n-dimensional array). Compared to a Python list, an ndarray is similar in terms of serving as a data container. Some differences between the two are:</p>
<ul class="simple">
<li><p>ndarrays can have multiple dimensions, <em>e.g.</em> a 1-D array is a vector, a 2-D array is a matrix</p></li>
<li><p>ndarrays are fast only when all data elements are of the same type</p></li>
</ul>
<p><img alt="" src="_images/python-list-vs-numpy-array.svg" /></p>
</section>
<section id="creating-numpy-arrays">
<h4>Creating NumPy arrays<a class="headerlink" href="#creating-numpy-arrays" title="Link to this heading">¶</a></h4>
<p>One way to create a NumPy array is to convert from a Python list, but make sure that the list is homogeneous (contains same data type) otherwise performace will be downgraded. Since appending elements to an existing array is slow, it is a common practice to preallocate the necessary space with <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> or <code class="docutils literal notranslate"><span class="pre">np.empty</span></code> when converting from a Python list is not possible.</p>
<div class="admonition-code-for-demonstration demo admonition" id="demo-0">
<p class="admonition-title">Code for demonstration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a = </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># array([ 1., 2., 3., 4.])</span>

<span class="n">list1</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)</span>
<span class="c1"># create complex array, with imaginary part equal to zero</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mat = </span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">mat</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># array([[ 1.+0.j, 2.+0.j, 3.+0.j],</span>
<span class="c1">#       [ 4.+0.j, 5.+0.j, 6.+0.j]])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mat.shape=</span><span class="si">{</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">, mat.size=</span><span class="si">{</span><span class="n">mat</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># mat.shape=(2, 3), mat.size=6</span>
</pre></div>
</div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>You should copy the code above to a separate code block, or change its cell type from from <code class="docutils literal notranslate"><span class="pre">Markdown</span></code> to <code class="docutils literal notranslate"><span class="pre">Code</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">arange</span></code> and <code class="docutils literal notranslate"><span class="pre">linspace</span></code> can generate ranges of numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0 1 2 3 4 5 6 7 8 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.1  0.12 0.14 0.16 0.18]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-4.5  -2.25  0.    2.25  4.5 ]
</pre></div>
</div>
</div>
</div>
</section>
<section id="array-operations-and-manipulations">
<h4>Array operations and manipulations<a class="headerlink" href="#array-operations-and-manipulations" title="Link to this heading">¶</a></h4>
<p>All the familiar arithmetic operators in NumPy are applied elementwise:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; a + b = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="se">\n</span><span class="s2"> a / b = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> a + b = [5 7 9]
 a / b = [0.25 0.4  0.5 ]
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="_images/np_add_1d_new.svg" /></p>
<p><img alt="" src="_images/np_div_1d_new.svg" /></p>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>Run the code below to get familiar with indexing in a 2D example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>

</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can either copy the code from the cell above or download the code example from <a class="reference download internal" download="" href="_downloads/f696d37fe9b27a8f4ddf7c1bee3a26ca/code-example.py"><span class="xref download myst">HERE</span></a>.</p>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span><span class="p">]]</span>

</pre></div>
</div>
<p><img alt="" src="_images/np_add_2d.svg" /></p>
</div>
</div>
</section>
<section id="array-indexing">
<h4>Array indexing<a class="headerlink" href="#array-indexing" title="Link to this heading">¶</a></h4>
<p>Basic indexing is similar to Python lists. Note that advanced indexing creates copies of arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>

<span class="c1"># integer indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Integer indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data = </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[3] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[0:2] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[-2] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[::-4] = </span><span class="si">{</span><span class="n">data</span><span class="p">[::</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># fancy indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Fancy indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[[1,6,3]] = </span><span class="si">{</span><span class="n">data</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># boolean indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Boolean indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[data&gt;5] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Integer indexing
data = [1 2 3 4 5 6 7 8]
data[3] = 4
data[0:2] = [1 2]
data[-2] = 7
data[::-4] = [8 4]

Fancy indexing
data[[1,6,3]] = [2 7 4]

Boolean indexing
data[data&gt;5] = [6 7 8]
</pre></div>
</div>
</div>
</div>
<p><a class="reference internal" href="_images/array-indexing-1D.png"><img alt="" class="align-center" src="_images/array-indexing-1D.png" style="width: 30em;" /></a></p>
<div class="admonition-exercise exercise important admonition" id="exercise-1">
<p class="admonition-title">Exercise</p>
<p>Run the code below to get familiar with indexing in a 2D example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>

<span class="c1"># integer indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Integer indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[1] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[:, 1] = </span><span class="si">{</span><span class="n">data</span><span class="p">[:,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[1:3, 2:4] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># fancy indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Fancy indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[[0,2,1], [2,3,0]] = </span><span class="si">{</span><span class="n">data</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># boolean indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Boolean indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[data&gt;10] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Again, you should move the code above to a separate code block, or change its cell type from from <code class="docutils literal notranslate"><span class="pre">Markdown</span></code> to <code class="docutils literal notranslate"><span class="pre">Code</span></code>.</p>
</div>
</section>
<section id="i-o-with-numpy">
<h4>I/O with NumPy<a class="headerlink" href="#i-o-with-numpy" title="Link to this heading">¶</a></h4>
<p>Numpy provides functions for reading from/writing to files. Both ASCII and binary formats are supported with the CSV and npy/npz formats.</p>
<p><strong>CSV</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.loadtxt()</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.savetxt()</span></code> functions can be used. They save in a regular column layout and can deal with different delimiters, column titles and numerical representations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;my_array.csv&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;my_array.csv&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ True  True  True  True]
</pre></div>
</div>
</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you get an eror like xxx, you should import numpy before the first line <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code>.</p>
</div>
<p><strong>Binary</strong></p>
<p>The npy format is a binary format used to dump arrays of any shape. Several arrays can be saved into a single npz file, which is simply a zipped collection of different npy files. All the arrays to be saved into a npz file can be passed as kwargs to the <code class="docutils literal notranslate"><span class="pre">numpy.savez()</span></code> function. The data can then be recovered using the <code class="docutils literal notranslate"><span class="pre">numpy.load()</span></code> method, which returns a dictionary-like object in which each key points to one of the arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s2">&quot;my_arrays.npz&quot;</span><span class="p">,</span> <span class="n">array_1</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">array_2</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;my_arrays.npz&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;array_1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">a</span><span class="p">)</span> <span class="c1"># [ True  True  True  True]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;array_2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span> <span class="c1"># [ True  True  True  True]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ True  True  True  True]
[ True  True  True  True]
</pre></div>
</div>
</div>
</div>
</section>
<section id="random-numbers">
<h4>Random numbers<a class="headerlink" href="#random-numbers" title="Link to this heading">¶</a></h4>
<p>The module <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> provides several functions for constructing random arrays</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random()</span></code>: uniform random numbers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normal()</span></code>: normal distribution</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">choice()</span></code>: random sample from given array</p></li>
<li><p>…</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0.9771641  0.35960723]
 [0.80744122 0.04595658]] 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2 2 2 1 2 3 3 0 3 3]
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You might get different results from the above code example.</p>
</div>
</section>
</section>
<section id="pandas">
<h3>Pandas<a class="headerlink" href="#pandas" title="Link to this heading">¶</a></h3>
<p>Pandas is a Python package that provides high-performance and easy to use data structures and data analysis tools. The core data structures of Pandas are Series and Dataframes.</p>
<ul class="simple">
<li><p>a Pandas <code class="docutils literal notranslate"><span class="pre">series</span></code> is a one-dimensional NumPy array with an index which we could use to access the data</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> consist of a table of values with labels for each row and column. A dataframe can combine multiple data types, such as numbers and text, but the data in each column is of the same type.</p></li>
<li><p>each column of a dataframe is a series object - a dataframe is thus a collection of series.</p></li>
</ul>
<p><a class="reference internal" href="_images/pandas_dataframe.svg"><img alt="" class="align-center" src="_images/pandas_dataframe.svg" style="width: 30em;" /></a></p>
<section id="data-analysis-workflow">
<h4>Data analysis workflow<a class="headerlink" href="#data-analysis-workflow" title="Link to this heading">¶</a></h4>
<p>Pandas is a powerful tool for many steps of a data analysis pipeline:</p>
<p>To explore some of the capabilities, we start with an example dataset containing the passenger list from the Titanic, which is often used in Kaggle competitions and data science tutorials. First step is to load Pandas and download the dataset into a dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/pandas-dev/pandas/master/doc/data/titanic.csv&quot;</span>

<span class="c1"># set the index to the &quot;Name&quot; column</span>
<span class="n">titanic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pandas also understands multiple other formats, for example <code class="docutils literal notranslate"><span class="pre">read_excel()</span></code>, <code class="docutils literal notranslate"><span class="pre">read_hdf()</span></code>, <code class="docutils literal notranslate"><span class="pre">read_json()</span></code>, <em>etc.</em> (and corresponding methods to write to file: <code class="docutils literal notranslate"><span class="pre">to_csv()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_excel()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_hdf()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_json()</span></code>, …)…)</p>
</div>
<p>We can now view the dataframe to get an idea of what it contains and print some summary statistics of its numerical data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the first 5 lines of the dataframe</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># print some information about the columns</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="c1"># print summary statistics for each column</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="missing-invalid-data">
<h4>Missing/invalid data<a class="headerlink" href="#missing-invalid-data" title="Link to this heading">¶</a></h4>
<p>What if your dataset has missing data? Pandas uses the value np.nan to represent missing data, and by default does not include it in any computations. We can find missing values, drop them from our dataframe, replace them with any value we like or do forward or backward filling.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">titanic</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>                           <span class="c1"># returns boolean mask of NaN values</span>

<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>                  <span class="c1"># drop missing values</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s2">&quot;any&quot;</span><span class="p">))</span>         <span class="c1"># or how=&quot;all&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Cabin&quot;</span><span class="p">]))</span>  <span class="c1"># only drop NaNs from one column</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>                 <span class="c1"># replace NaNs with zero</span>
</pre></div>
</div>
</section>
</section>
<section id="scipy">
<h3>Scipy<a class="headerlink" href="#scipy" title="Link to this heading">¶</a></h3>
<p>SciPy is a library that builds on top of NumPy. It contains a lot of interfaces to battle-tested numerical routines written in Fortran or C, as well as Python implementations of many common algorithms.</p>
<p>Let us look more closely into one out of the countless useful functions available in SciPy. <code class="docutils literal notranslate"><span class="pre">curve_fit()</span></code> is a non-linear least squares fitting function. NumPy has least-squares fitting via the <code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq()</span></code> function, but we need to go to SciPy to find non-linear curve fitting. This example fits a power-law to a vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">curve_fit</span>

<span class="k">def</span><span class="w"> </span><span class="nf">powerlaw</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="c1"># data</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">9115</span><span class="p">,</span> <span class="mi">8368</span><span class="p">,</span> <span class="mi">7711</span><span class="p">,</span> <span class="mi">5480</span><span class="p">,</span> <span class="mi">3492</span><span class="p">,</span> <span class="mi">3376</span><span class="p">,</span> <span class="mi">2884</span><span class="p">,</span> <span class="mi">2792</span><span class="p">,</span> <span class="mi">2703</span><span class="p">,</span> <span class="mi">2701</span><span class="p">])</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">1.0</span>

<span class="c1"># initial guess for variables</span>
<span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># fit data</span>
<span class="n">params</span><span class="p">,</span> <span class="n">cov</span> <span class="o">=</span> <span class="n">curve_fit</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">powerlaw</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">p0</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A =&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;s =&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A = 10240.788123784849 +/- 984.5879720590807
s = -0.5372630409593478 +/- 0.08171727565402351
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># optionally plot</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;raw data&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">powerlaw</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;power law&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/24f443078f2f8febd36ab32ca19a221617685b8afd064048f7b16c543ed4ff1d.png" src="_images/24f443078f2f8febd36ab32ca19a221617685b8afd064048f7b16c543ed4ff1d.png" />
</div>
</div>
</section>
<section id="exercises">
<h3>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">¶</a></h3>
<div class="admonition-working-effectively-with-dataframes exercise important admonition" id="exercise-2">
<p class="admonition-title">Working effectively with dataframes</p>
<p>Recall the <code class="docutils literal notranslate"><span class="pre">curve_fit()</span></code> method from SciPy discussed above, and imagine that we want to fit powerlaws to every row in a large dataframe. How can this be done effectively?</p>
<p>First define the <code class="docutils literal notranslate"><span class="pre">powerlaw()</span></code> function and another function for fitting a row of numbers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">curve_fit</span>

<span class="k">def</span><span class="w"> </span><span class="nf">powerlaw</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">1.0</span>
    <span class="n">params</span><span class="p">,</span> <span class="n">cov</span> <span class="o">=</span> <span class="n">curve_fit</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">powerlaw</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Next load a dataset with multiple rows similar to the one used in the example above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/ENCCS/hpda-python/main/content/data/results.csv&quot;</span><span class="p">)</span>
<span class="c1"># print first few rows</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Now consider these four different ways of fitting a powerlaw to each row of the dataframe:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Loop</span>

<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_indx</span><span class="p">,</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. `iterrows()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3. `apply()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. `apply()` with `raw=True`</span>

<span class="c1"># raw=True passes numpy ndarrays instead of series to fit_powerlaw</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Which one do you think is most efficient? You can measure the execution time by adding <code class="docutils literal notranslate"><span class="pre">%%timeit</span></code> to the first line of a Jupyter code cell. More on timing and profiling in a later episode.</p>
</div>
<div class="admonition-working-effectively-with-dataframes solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Working effectively with dataframes</p>
<p>The execution time for four different methods are described below. Note that you may get different numbers when you run these examples.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1 Loop</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
   <span class="n">row</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_indx</span><span class="p">,</span><span class="mi">1</span><span class="p">:]</span>
   <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
   <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># 33.6 ms ± 682 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. `iterrows()`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
   <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
   <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># 28.7 ms ± 947 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3. `apply()`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 26.1 ms ± 1.19 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. `apply()` with `raw=True`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 24 ms ± 1.27 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
</div>
<div class="admonition-further-analysis-of-titanic-passenger-list-dataset exercise important admonition" id="exercise-3">
<p class="admonition-title">Further analysis of Titanic passenger list dataset</p>
<p>Consider the titanic dataset.</p>
<blockquote>
<div><p>If you haven’t done so already, load it into a dataframe before the exercises:</p>
<p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span> <span class="pre">as</span> <span class="pre">pd;</span> <span class="pre">url</span> <span class="pre">=</span> <span class="pre">&quot;https://raw.githubusercontent.com/pandas-dev/pandas/master/doc/data/titanic.csv&quot;;</span> <span class="pre">titanic</span> <span class="pre">=</span> <span class="pre">pd.read_csv(url,</span> <span class="pre">index_col=&quot;Name&quot;)</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>Compute the mean age of the first 10 passengers by slicing and the <code class="docutils literal notranslate"><span class="pre">mean</span></code> method</p></li>
<li><p>Using boolean indexing, compute the survival rate (mean of “Survived” values) among passengers over and under the average age.
Now investigate the family size of the passengers (<em>i.e.</em> the “SibSp” column):</p></li>
<li><p>What different family sizes exist in the passenger list?</p>
<ul>
<li><p><strong>Hint</strong>: try the <code class="docutils literal notranslate"><span class="pre">unique()</span></code> method</p></li>
</ul>
</li>
<li><p>What are the names of the people in the largest family group?</p></li>
<li><p>(Advanced) Create histograms showing the distribution of family sizes for passengers split by the fare, i.e. one group of high-fare passengers (where the fare is above average) and one for low-fare passengers</p>
<ul>
<li><p><strong>Hint</strong>: instead of an existing column name, you can give a lambda function as a parameter to <code class="docutils literal notranslate"><span class="pre">hist</span></code> to compute a value on the fly. For example <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">&quot;Poor&quot;</span> <span class="pre">if</span> <span class="pre">titanic[&quot;Fare&quot;].loc[x]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Fare&quot;].mean()</span> <span class="pre">else</span> <span class="pre">&quot;Rich&quot;</span></code>).</p></li>
</ul>
</li>
</ul>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-2">
<p class="admonition-title">Solution</p>
<ol class="arabic simple">
<li><p>Mean age of the first 10 passengers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.iloc[:10,:][&quot;Age&quot;].mean()</span></code> or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.iloc[:10,4].mean()</span></code> or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.loc[:&quot;Nasser,</span> <span class="pre">Mrs.</span> <span class="pre">Nicholas</span> <span class="pre">(Adele</span> <span class="pre">Achem)&quot;,</span> <span class="pre">&quot;Age&quot;].mean()</span></code></p></li>
</ul>
</li>
<li><p>Survival rate among passengers over and under average age:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;Age&quot;]</span> <span class="pre">&gt;</span> <span class="pre">titanic[&quot;Age&quot;].mean()][&quot;Survived&quot;].mean()</span></code> and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;Age&quot;]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Age&quot;].mean()][&quot;Survived&quot;].mean()</span></code></p></li>
</ul>
</li>
<li><p>Existing family sizes: <code class="docutils literal notranslate"><span class="pre">titanic[&quot;SibSp&quot;].unique()</span></code></p></li>
<li><p>Names of members of largest family(ies): <code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;SibSp&quot;]</span> <span class="pre">==</span> <span class="pre">8].index</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.hist(&quot;SibSp&quot;,</span> <span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">&quot;Poor&quot;</span> <span class="pre">if</span> <span class="pre">titanic[&quot;Fare&quot;].loc[x]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Fare&quot;].mean()</span> <span class="pre">else</span> <span class="pre">&quot;Rich&quot;,</span> <span class="pre">rwidth=0.9)</span></code></p></li>
</ol>
</div>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>NumPy provides a static array data structure, fast mathematical operations for arrays and tools for linear algebra and random numbers</p></li>
<li><p>Pandas dataframes are a good data structure for tabular data</p></li>
<li><p>Dataframes allow both simple and advanced analysis in very compact form</p></li>
<li><p>SciPy contains a lot of interfaces to battle-tested numerical routines</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://uppmax.github.io/R-python-julia-matlab-HPC/">Introduction to running R, Python, Julia, and Matlab in HPC</a></p></li>
<li><p><a class="reference external" href="https://github.com/ENCCS/webinar_documents/tree/main/2024-oct-24-python">Practical Intro to GPU Programming using Python</a></p></li>
<li><p><a class="reference external" href="https://uppmax.github.io/HPC-python/">Using Python in an HPC environment</a></p></li>
<li><p><a class="reference external" href="https://aaltoscicomp.github.io/python-for-scicomp/">Python for Scientific Computing</a></p></li>
<li><p>…</p></li>
</ul>
</div>
</section>
</section>
<span id="document-episodes/Python-HPDA-2-EfficientArrayComputing-markdown"></span><section id="efficient-array-computing-in-markdown">
<h2>Efficient Array Computing (in Markdown)<a class="headerlink" href="#efficient-array-computing-in-markdown" title="Link to this heading">¶</a></h2>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The content below is nearly identical to the previous episode, and only the source file differs. This page is generated from an markdown file.</p>
</div>
<p>This episode introduces how to write high-performance numerical code in Python packages (Numpy, Pandas, and Scipy) by leveraging tools and libraries designed to optimize computation speed and memory usage. It explores strategies such as vectorization with NumPy, just-in-time compilation using Numba, and parallelization techniques that can significantly reduce execution time. These methods help Python developers overcome the traditional performance limitations of the language, making it suitable for intensive scientific and engineering applications.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand limitations of Python’s standard library for large data processing</p></li>
<li><p>Understand the logic behind NumPy ndarrays and learn to use some NumPy numerical computing tools</p></li>
<li><p>Learn to use data structures and analysis tools from Panda</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>25 min teaching/type-along</p></li>
<li><p>25 min exercising</p></li>
</ul>
</div>
<section id="why-can-python-be-slow">
<h3>Why can Python be slow?<a class="headerlink" href="#why-can-python-be-slow" title="Link to this heading">¶</a></h3>
<p>Computer programs are nowadays practically always written in a high-level human readable programming language and then translated to the actual machine instructions that a processor understands. There are two main approaches for this translation:</p>
<ul class="simple">
<li><p>For <strong>compiled</strong> programming languages, the translation is done by a compiler before the execution of the program</p></li>
<li><p>For <strong>interpreted</strong> languages, the translation is done by an interpreter during the execution of the program</p></li>
</ul>
</section>
<section id="numpy">
<h3>NumPy<a class="headerlink" href="#numpy" title="Link to this heading">¶</a></h3>
<p>NumPy is based on well-optimized C code, which gives much better performace than regular Python. In particular, by using homogeneous data structures, NumPy <em>vectorizes</em> mathematical operations where fast pre-compiled code can be applied to a sequence of data instead of using traditional <code class="docutils literal notranslate"><span class="pre">for</span></code> loops.</p>
<section id="arrays">
<h4>Arrays<a class="headerlink" href="#arrays" title="Link to this heading">¶</a></h4>
<p>The core of NumPy is the NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> (n-dimensional array). Compared to a Python list, an ndarray is similar in terms of serving as a data container. Some differences between the two are:</p>
<ul class="simple">
<li><p>ndarrays can have multiple dimensions, <em>e.g.</em> a 1-D array is a vector, a 2-D array is a matrix</p></li>
<li><p>ndarrays are fast only when all data elements are of the same type</p></li>
</ul>
<p><img alt="" src="_images/python-list-vs-numpy-array.svg" /></p>
</section>
<section id="creating-numpy-arrays">
<h4>Creating NumPy arrays<a class="headerlink" href="#creating-numpy-arrays" title="Link to this heading">¶</a></h4>
<p>One way to create a NumPy array is to convert from a Python list, but make sure that the list is homogeneous (contains same data type) otherwise performace will be downgraded. Since appending elements to an existing array is slow, it is a common practice to preallocate the necessary space with <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code> or <code class="docutils literal notranslate"><span class="pre">np.empty</span></code> when converting from a Python list is not possible.</p>
<div class="admonition-code-for-demonstration demo admonition" id="demo-0">
<p class="admonition-title">Code for demonstration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a = </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># array([ 1., 2., 3., 4.])</span>

<span class="n">list1</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)</span>
<span class="c1"># create complex array, with imaginary part equal to zero</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mat = </span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">mat</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># array([[ 1.+0.j, 2.+0.j, 3.+0.j],</span>
<span class="c1">#       [ 4.+0.j, 5.+0.j, 6.+0.j]])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mat.shape=</span><span class="si">{</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">, mat.size=</span><span class="si">{</span><span class="n">mat</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># mat.shape=(2, 3), mat.size=6</span>
</pre></div>
</div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>You should copy the code above to a separate code block, or change its cell type from from <code class="docutils literal notranslate"><span class="pre">Markdown</span></code> to <code class="docutils literal notranslate"><span class="pre">Code</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">arange</span></code> and <code class="docutils literal notranslate"><span class="pre">linspace</span></code> can generate ranges of numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0 1 2 3 4 5 6 7 8 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.1  0.12 0.14 0.16 0.18]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-4.5  -2.25  0.    2.25  4.5 ]
</pre></div>
</div>
</div>
</div>
</section>
<section id="array-operations-and-manipulations">
<h4>Array operations and manipulations<a class="headerlink" href="#array-operations-and-manipulations" title="Link to this heading">¶</a></h4>
<p>All the familiar arithmetic operators in NumPy are applied elementwise:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; a + b = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="se">\n</span><span class="s2"> a / b = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> a + b = [5 7 9]
 a / b = [0.25 0.4  0.5 ]
</pre></div>
</div>
</div>
</div>
<p><img alt="" src="_images/np_add_1d_new.svg" /></p>
<p><img alt="" src="_images/np_div_1d_new.svg" /></p>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>Run the code below to get familiar with indexing in a 2D example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>

</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can either copy the code from the cell above or download the code example from <a class="reference download internal" download="" href="_downloads/f696d37fe9b27a8f4ddf7c1bee3a26ca/code-example.py"><span class="xref download myst">HERE</span></a>.</p>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span><span class="p">]]</span>

</pre></div>
</div>
<p><img alt="" src="_images/np_add_2d.svg" /></p>
</div>
</div>
</section>
<section id="array-indexing">
<h4>Array indexing<a class="headerlink" href="#array-indexing" title="Link to this heading">¶</a></h4>
<p>Basic indexing is similar to Python lists. Note that advanced indexing creates copies of arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1D example</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>

<span class="c1"># integer indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Integer indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data = </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[3] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[0:2] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[-2] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[::-4] = </span><span class="si">{</span><span class="n">data</span><span class="p">[::</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># fancy indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Fancy indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[[1,6,3]] = </span><span class="si">{</span><span class="n">data</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># boolean indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Boolean indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[data&gt;5] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Integer indexing
data = [1 2 3 4 5 6 7 8]
data[3] = 4
data[0:2] = [1 2]
data[-2] = 7
data[::-4] = [8 4]

Fancy indexing
data[[1,6,3]] = [2 7 4]

Boolean indexing
data[data&gt;5] = [6 7 8]
</pre></div>
</div>
</div>
</div>
<p><a class="reference internal" href="_images/array-indexing-1D.png"><img alt="" class="align-center" src="_images/array-indexing-1D.png" style="width: 30em;" /></a></p>
<div class="admonition-exercise exercise important admonition" id="exercise-1">
<p class="admonition-title">Exercise</p>
<p>Run the code below to get familiar with indexing in a 2D example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>

<span class="c1"># integer indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Integer indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[1] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[:, 1] = </span><span class="si">{</span><span class="n">data</span><span class="p">[:,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[1:3, 2:4] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># fancy indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Fancy indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[[0,2,1], [2,3,0]] = </span><span class="si">{</span><span class="n">data</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># boolean indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Boolean indexing&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data[data&gt;10] = </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Again, you should move the code above to a separate code block, or change its cell type from from <code class="docutils literal notranslate"><span class="pre">Markdown</span></code> to <code class="docutils literal notranslate"><span class="pre">Code</span></code>.</p>
</div>
</section>
<section id="i-o-with-numpy">
<h4>I/O with NumPy<a class="headerlink" href="#i-o-with-numpy" title="Link to this heading">¶</a></h4>
<p>Numpy provides functions for reading from/writing to files. Both ASCII and binary formats are supported with the CSV and npy/npz formats.</p>
<p><strong>CSV</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.loadtxt()</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.savetxt()</span></code> functions can be used. They save in a regular column layout and can deal with different delimiters, column titles and numerical representations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="s2">&quot;my_array.csv&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;my_array.csv&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ True  True  True  True]
</pre></div>
</div>
</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you get an eror like xxx, you should import numpy before the first line <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code>.</p>
</div>
<p><strong>Binary</strong></p>
<p>The npy format is a binary format used to dump arrays of any shape. Several arrays can be saved into a single npz file, which is simply a zipped collection of different npy files. All the arrays to be saved into a npz file can be passed as kwargs to the <code class="docutils literal notranslate"><span class="pre">numpy.savez()</span></code> function. The data can then be recovered using the <code class="docutils literal notranslate"><span class="pre">numpy.load()</span></code> method, which returns a dictionary-like object in which each key points to one of the arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span><span class="s2">&quot;my_arrays.npz&quot;</span><span class="p">,</span> <span class="n">array_1</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">array_2</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;my_arrays.npz&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;array_1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">a</span><span class="p">)</span> <span class="c1"># [ True  True  True  True]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;array_2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">)</span> <span class="c1"># [ True  True  True  True]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ True  True  True  True]
[ True  True  True  True]
</pre></div>
</div>
</div>
</div>
</section>
<section id="random-numbers">
<h4>Random numbers<a class="headerlink" href="#random-numbers" title="Link to this heading">¶</a></h4>
<p>The module <code class="docutils literal notranslate"><span class="pre">numpy.random</span></code> provides several functions for constructing random arrays</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random()</span></code>: uniform random numbers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normal()</span></code>: normal distribution</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">choice()</span></code>: random sample from given array</p></li>
<li><p>…</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0.59430762 0.58960073]
 [0.63036334 0.52887152]] 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3 1 3 0 3 1 3 3 0 2]
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You might get different results from the above code example.</p>
</div>
</section>
</section>
<section id="pandas">
<h3>Pandas<a class="headerlink" href="#pandas" title="Link to this heading">¶</a></h3>
<p>Pandas is a Python package that provides high-performance and easy to use data structures and data analysis tools. The core data structures of Pandas are Series and Dataframes.</p>
<ul class="simple">
<li><p>a Pandas <code class="docutils literal notranslate"><span class="pre">series</span></code> is a one-dimensional NumPy array with an index which we could use to access the data</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> consist of a table of values with labels for each row and column. A dataframe can combine multiple data types, such as numbers and text, but the data in each column is of the same type.</p></li>
<li><p>each column of a dataframe is a series object - a dataframe is thus a collection of series.</p></li>
</ul>
<p><a class="reference internal" href="_images/pandas_dataframe.svg"><img alt="" class="align-center" src="_images/pandas_dataframe.svg" style="width: 30em;" /></a></p>
<section id="data-analysis-workflow">
<h4>Data analysis workflow<a class="headerlink" href="#data-analysis-workflow" title="Link to this heading">¶</a></h4>
<p>Pandas is a powerful tool for many steps of a data analysis pipeline:</p>
<p>To explore some of the capabilities, we start with an example dataset containing the passenger list from the Titanic, which is often used in Kaggle competitions and data science tutorials. First step is to load Pandas and download the dataset into a dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/pandas-dev/pandas/master/doc/data/titanic.csv&quot;</span>

<span class="c1"># set the index to the &quot;Name&quot; column</span>
<span class="n">titanic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pandas also understands multiple other formats, for example <code class="docutils literal notranslate"><span class="pre">read_excel()</span></code>, <code class="docutils literal notranslate"><span class="pre">read_hdf()</span></code>, <code class="docutils literal notranslate"><span class="pre">read_json()</span></code>, <em>etc.</em> (and corresponding methods to write to file: <code class="docutils literal notranslate"><span class="pre">to_csv()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_excel()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_hdf()</span></code>, <code class="docutils literal notranslate"><span class="pre">to_json()</span></code>, …)…)</p>
</div>
<p>We can now view the dataframe to get an idea of what it contains and print some summary statistics of its numerical data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the first 5 lines of the dataframe</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># print some information about the columns</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="c1"># print summary statistics for each column</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="missing-invalid-data">
<h4>Missing/invalid data<a class="headerlink" href="#missing-invalid-data" title="Link to this heading">¶</a></h4>
<p>What if your dataset has missing data? Pandas uses the value np.nan to represent missing data, and by default does not include it in any computations. We can find missing values, drop them from our dataframe, replace them with any value we like or do forward or backward filling.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">titanic</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>                           <span class="c1"># returns boolean mask of NaN values</span>

<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>                  <span class="c1"># drop missing values</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s2">&quot;any&quot;</span><span class="p">))</span>         <span class="c1"># or how=&quot;all&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Cabin&quot;</span><span class="p">]))</span>  <span class="c1"># only drop NaNs from one column</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>                 <span class="c1"># replace NaNs with zero</span>
</pre></div>
</div>
</section>
</section>
<section id="scipy">
<h3>Scipy<a class="headerlink" href="#scipy" title="Link to this heading">¶</a></h3>
<p>SciPy is a library that builds on top of NumPy. It contains a lot of interfaces to battle-tested numerical routines written in Fortran or C, as well as Python implementations of many common algorithms.</p>
<p>Let us look more closely into one out of the countless useful functions available in SciPy. <code class="docutils literal notranslate"><span class="pre">curve_fit()</span></code> is a non-linear least squares fitting function. NumPy has least-squares fitting via the <code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq()</span></code> function, but we need to go to SciPy to find non-linear curve fitting. This example fits a power-law to a vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">curve_fit</span>

<span class="k">def</span><span class="w"> </span><span class="nf">powerlaw</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="c1"># data</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">9115</span><span class="p">,</span> <span class="mi">8368</span><span class="p">,</span> <span class="mi">7711</span><span class="p">,</span> <span class="mi">5480</span><span class="p">,</span> <span class="mi">3492</span><span class="p">,</span> <span class="mi">3376</span><span class="p">,</span> <span class="mi">2884</span><span class="p">,</span> <span class="mi">2792</span><span class="p">,</span> <span class="mi">2703</span><span class="p">,</span> <span class="mi">2701</span><span class="p">])</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">1.0</span>

<span class="c1"># initial guess for variables</span>
<span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># fit data</span>
<span class="n">params</span><span class="p">,</span> <span class="n">cov</span> <span class="o">=</span> <span class="n">curve_fit</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">powerlaw</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">p0</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A =&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;s =&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;+/-&quot;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A = 10240.788123784849 +/- 984.5879720590807
s = -0.5372630409593478 +/- 0.08171727565402351
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># optionally plot</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">hvplot.pandas</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">X</span><span class="p">,</span>
    <span class="s2">&quot;raw data&quot;</span><span class="p">:</span> <span class="n">Y</span><span class="p">,</span>
    <span class="s2">&quot;power law&quot;</span><span class="p">:</span> <span class="n">powerlaw</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="p">})</span>
<span class="n">scatter</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;raw data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;power law&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hvplot</span><span class="p">()</span>
<span class="p">(</span><span class="n">scatter</span> <span class="o">*</span> <span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script type="esms-options">{"shimMode": true}</script><style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
  > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style></div><script type="application/javascript">(function(root) {
  function now() {
    return new Date();
  }

  const force = true;
  const py_version = '3.8.0'.replace('rc', '-rc.').replace('.dev', '-dev.');
  const reloading = false;
  const Bokeh = root.Bokeh;

  // Set a timeout for this load but only if we are not already initializing
  if (typeof (root._bokeh_timeout) === "undefined" || (force || !root._bokeh_is_initializing)) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks;
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];
    if (js_modules == null) js_modules = [];
    if (js_exports == null) js_exports = {};

    root._bokeh_onload_callbacks.push(callback);

    if (root._bokeh_is_loading > 0) {
      // Don't load bokeh if it is still initializing
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    } else if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {
      // There is nothing to load
      run_callbacks();
      return null;
    }

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }
    window._bokeh_on_load = on_load

    function on_error(e) {
      const src_el = e.srcElement
      console.error("failed to load " + (src_el.href || src_el.src));
    }

    const skip = [];
    if (window.requirejs) {
      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});
      root._bokeh_is_loading = css_urls.length + 0;
    } else {
      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;
    }

    const existing_stylesheets = []
    const links = document.getElementsByTagName('link')
    for (let i = 0; i < links.length; i++) {
      const link = links[i]
      if (link.href != null) {
        existing_stylesheets.push(link.href)
      }
    }
    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const escaped = encodeURI(url)
      if (existing_stylesheets.indexOf(escaped) !== -1) {
        on_load()
        continue;
      }
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }    var existing_scripts = []
    const scripts = document.getElementsByTagName('script')
    for (let i = 0; i < scripts.length; i++) {
      var script = scripts[i]
      if (script.src != null) {
        existing_scripts.push(script.src)
      }
    }
    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (let i = 0; i < js_modules.length; i++) {
      const url = js_modules[i];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (const name in js_exports) {
      const url = js_exports[name];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) >= 0 || root[name] != null) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onerror = on_error;
      element.async = false;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      element.textContent = `
      import ${name} from "${url}"
      window.${name} = ${name}
      window._bokeh_on_load()
      `
      document.head.appendChild(element);
    }
    if (!js_urls.length && !js_modules.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.holoviz.org/panel/1.8.2/dist/bundled/reactiveesm/es-module-shims@^1.10.0/dist/es-module-shims.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-3.8.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.8.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.8.0.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.8.0.min.js", "https://cdn.holoviz.org/panel/1.8.2/dist/panel.min.js"];
  const js_modules = [];
  const js_exports = {};
  const css_urls = [];
  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (let i = 0; i < inline_js.length; i++) {
        try {
          inline_js[i].call(root, root.Bokeh);
        } catch(e) {
          if (!reloading) {
            throw e;
          }
        }
      }
      // Cache old bokeh versions
      if (Bokeh != undefined && !reloading) {
        var NewBokeh = root.Bokeh;
        if (Bokeh.versions === undefined) {
          Bokeh.versions = new Map();
        }
        if (NewBokeh.version !== Bokeh.version) {
          Bokeh.versions.set(NewBokeh.version, NewBokeh)
        }
        root.Bokeh = Bokeh;
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
    root._bokeh_is_initializing = false
  }

  function load_or_wait() {
    // Implement a backoff loop that tries to ensure we do not load multiple
    // versions of Bokeh and its dependencies at the same time.
    // In recent versions we use the root._bokeh_is_initializing flag
    // to determine whether there is an ongoing attempt to initialize
    // bokeh, however for backward compatibility we also try to ensure
    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version
    // before older versions are fully initialized.
    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {
      // If the timeout and bokeh was not successfully loaded we reset
      // everything and try loading again
      root._bokeh_timeout = Date.now() + 5000;
      root._bokeh_is_initializing = false;
      root._bokeh_onload_callbacks = undefined;
      root._bokeh_is_loading = 0
      console.log("Bokeh: BokehJS was loaded multiple times but one version failed to initialize.");
      load_or_wait();
    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === "undefined" && root._bokeh_onload_callbacks !== undefined)) {
      setTimeout(load_or_wait, 100);
    } else {
      root._bokeh_is_initializing = true
      root._bokeh_onload_callbacks = []
      const bokeh_loaded = root.Bokeh != null && (root.Bokeh.version === py_version || (root.Bokeh.versions !== undefined && root.Bokeh.versions.has(py_version)));
      if (!reloading && !bokeh_loaded) {
        if (root.Bokeh) {
          root.Bokeh = undefined;
        }
        console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      }
      load_libs(css_urls, js_urls, js_modules, js_exports, function() {
        console.debug("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }
  // Give older versions of the autoload script a head-start to ensure
  // they initialize before we start loading newer version.
  setTimeout(load_or_wait, 100)
}(window));</script><script type="application/javascript">
if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        let retries = 0;
        const open = () => {
          if (comm.active) {
            comm.open();
          } else if (retries > 3) {
            console.warn('Comm target never activated')
          } else {
            retries += 1
            setTimeout(open, 500)
          }
        }
        if (comm.active) {
          comm.open();
        } else {
          setTimeout(open, 500)
        }
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        })
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}
</script><div class="output text_html"><div id='da9842ea-e9a7-4cec-9b48-87ee2c172c3c'>
  <div id="c2df8bce-cfd4-4d3c-a910-e8c903f2e2ad" data-root-id="da9842ea-e9a7-4cec-9b48-87ee2c172c3c" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"f02b8ccb-7eff-42d4-9a13-767f890e930d":{"version":"3.8.0","title":"Bokeh Application","config":{"type":"object","name":"DocumentConfig","id":"f537140a-51a3-4461-a064-6c41db502d55","attributes":{"notifications":{"type":"object","name":"Notifications","id":"0ab39fd3-eca9-46df-8498-e8e3d631f5b4"}}},"roots":[{"type":"object","name":"panel.models.browser.BrowserInfo","id":"da9842ea-e9a7-4cec-9b48-87ee2c172c3c"},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"cb9feb7c-38fe-4628-8aaa-736d1c655d46","attributes":{"plot_id":"da9842ea-e9a7-4cec-9b48-87ee2c172c3c","comm_id":"bff7ad52d7c14c54b1ebb380e7f40d79","client_comm_id":"da174fee8a8f4808957b36511744deba"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"start","kind":"Any","default":0},{"name":"end","kind":"Any","default":100},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]},{"type":"model","name":"holoviews.plotting.bokeh.raster.HoverModel","properties":[{"name":"xy","kind":"Any","default":null},{"name":"data","kind":"Any","default":null}]}]}};
  var render_items = [{"docid":"f02b8ccb-7eff-42d4-9a13-767f890e930d","roots":{"da9842ea-e9a7-4cec-9b48-87ee2c172c3c":"c2df8bce-cfd4-4d3c-a910-e8c903f2e2ad"},"root_ids":["da9842ea-e9a7-4cec-9b48-87ee2c172c3c"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
	const id_el = document.getElementById(root_id)
	if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
	  const root_el = id_el.children[0]
	  root_el.id = root_el.id + '-rendered'
	  for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
	    child.setAttribute('data-lm-suppress-shortcuts', 'true')
	  }
	}
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
	return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
	  var Bokeh = get_bokeh(root)
	  if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
	  } else {
	    console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
	    embed_document(root)
	  }
        }
      }
    }, 25, root)
  }
})(window);</script></div><div class="output text_html"><div id='8f6ecb1b-3675-4c06-9c14-b3afe0be5939'>
  <div id="f886751c-04e4-4e36-9ef0-fb301c7bfad8" data-root-id="8f6ecb1b-3675-4c06-9c14-b3afe0be5939" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"d77b140e-0c7e-484a-9220-c3d3319e7142":{"version":"3.8.0","title":"Bokeh Application","config":{"type":"object","name":"DocumentConfig","id":"a032faf6-0deb-4531-8707-c3029d273f1b","attributes":{"notifications":{"type":"object","name":"Notifications","id":"3baabd87-b0ef-46a6-aaec-0907975db883"}}},"roots":[{"type":"object","name":"Row","id":"8f6ecb1b-3675-4c06-9c14-b3afe0be5939","attributes":{"name":"Row00317","tags":["embedded"],"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"type":"object","name":"ImportedStyleSheet","id":"29fa24b4-8001-452f-96d9-2c490eaa61ae","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.2/dist/css/loading.css"}},{"type":"object","name":"ImportedStyleSheet","id":"6579cbfa-0e56-480e-9f6a-df87fddcec40","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.2/dist/css/listpanel.css"}},{"type":"object","name":"ImportedStyleSheet","id":"a3d39895-ff87-4719-a6e0-ebb268d71cee","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.2/dist/bundled/theme/default.css"}},{"type":"object","name":"ImportedStyleSheet","id":"15ab2fe2-0528-4f39-bc43-80064254088d","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.2/dist/bundled/theme/native.css"}}],"min_width":700,"margin":0,"sizing_mode":"stretch_width","align":"start","children":[{"type":"object","name":"Spacer","id":"3f239039-7b4d-4f49-b620-7ba34516f00c","attributes":{"name":"HSpacer00321","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"29fa24b4-8001-452f-96d9-2c490eaa61ae"},{"id":"a3d39895-ff87-4719-a6e0-ebb268d71cee"},{"id":"15ab2fe2-0528-4f39-bc43-80064254088d"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}},{"type":"object","name":"Figure","id":"a84329d6-b165-417a-bd3d-6c6e1b7ef32e","attributes":{"width":700,"height":300,"margin":[5,10],"sizing_mode":"fixed","align":"start","x_range":{"type":"object","name":"Range1d","id":"5d726024-c8fa-41b5-a6a9-fe3aa74e65f3","attributes":{"name":"index","tags":[[["index",null]],[]],"start":-0.38571428571428573,"end":9.385714285714286,"reset_start":-0.38571428571428573,"reset_end":9.385714285714286}},"y_range":{"type":"object","name":"Range1d","id":"540d6108-a15f-469c-a114-87d24d200212","attributes":{"name":"raw data","tags":[[["raw data",null]],{"type":"map","entries":[["invert_yaxis",false],["autorange",false]]}],"start":1947.021187621515,"end":10994.766936163334,"reset_start":1947.021187621515,"reset_end":10994.766936163334}},"x_scale":{"type":"object","name":"LinearScale","id":"2ccb22ea-e5e6-4d1e-a581-231e979474b0"},"y_scale":{"type":"object","name":"LinearScale","id":"6d5a2610-9f71-4dfd-b3c1-6f42b0084784"},"title":{"type":"object","name":"Title","id":"1c160208-5473-40b3-8fde-a3f13f678ab8","attributes":{"text_color":"black","text_font_size":"12pt"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"2ccd7ed7-b6ee-4175-bd25-d6a2f0e8fc43","attributes":{"name":"raw data","data_source":{"type":"object","name":"ColumnDataSource","id":"76cbb581-91f6-4941-8a87-9f961fbfc242","attributes":{"selected":{"type":"object","name":"Selection","id":"51a619b5-bc70-4184-b431-bba3d043a008","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"525a0bfd-43a1-46a6-9849-7faf3e62afcf"},"data":{"type":"map","entries":[["index",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/w3DiQ0AIAwEoNP6df+FhYQkGU7L5fZ4fbYfAnnvjSgAAAA="},"shape":[10],"dtype":"int32","order":"little"}],["raw data",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/5utzMCwQYGBQV6OgSFDlIFhCS8DgwEQu3AzMLzgYmDoB+JeIAYA5ar09SgAAAA="},"shape":[10],"dtype":"int32","order":"little"}],["raw_data",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/5utzMCwQYGBQV6OgSFDlIFhCS8DgwEQu3AzMLzgYmDoB+JeIAYA5ar09SgAAAA="},"shape":[10],"dtype":"int32","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"ffbd85f6-ab22-49fb-afe4-07df30b703d0","attributes":{"filter":{"type":"object","name":"AllIndices","id":"70fc41ce-dd6b-4556-ad68-378476c0a73f"}}},"glyph":{"type":"object","name":"Scatter","id":"29f21fe2-2b44-4af4-b80c-ed8b70d1891d","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"raw data"},"size":{"type":"value","value":5.477225575051661},"line_color":{"type":"value","value":"red"},"fill_color":{"type":"value","value":"red"},"hatch_color":{"type":"value","value":"red"}}},"selection_glyph":{"type":"object","name":"Scatter","id":"0c042752-d513-48b7-9d50-3c712c89016b","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"raw data"},"size":{"type":"value","value":5.477225575051661},"angle":{"type":"value","value":0.0},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":1.0},"line_width":{"type":"value","value":1},"line_join":{"type":"value","value":"bevel"},"line_cap":{"type":"value","value":"butt"},"line_dash":{"type":"value","value":[]},"line_dash_offset":{"type":"value","value":0},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":1.0},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":1.0},"hatch_scale":{"type":"value","value":12.0},"hatch_pattern":{"type":"value","value":null},"hatch_weight":{"type":"value","value":1.0},"marker":{"type":"value","value":"circle"}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"290ab0cb-c1a5-4013-a712-9e1726e4d9f0","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"raw data"},"size":{"type":"value","value":5.477225575051661},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"4caf7231-7aac-4c8f-9d50-aacf2878c7f2","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"raw data"},"size":{"type":"value","value":5.477225575051661},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"b063c0ae-e410-4f70-a9f6-b4cfaaa98de1","attributes":{"name":"power law","data_source":{"type":"object","name":"ColumnDataSource","id":"10d4fa26-aa9e-4b91-8646-6715b5163637","attributes":{"selected":{"type":"object","name":"Selection","id":"6852c795-b934-430f-98e5-99f934a3662b","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"38df8015-7114-484f-b66b-b718d6757d8e"},"data":{"type":"map","entries":[["index",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/w3DiQ0AIAwEoNP6df+FhYQkGU7L5fZ4fbYfAnnvjSgAAAA="},"shape":[10],"dtype":"int32","order":"little"}],["power law",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/wFQAK//kHw94WQAxEAe6dbZsJC7QNiNf1RdK7ZANZKIU5r+skBB2CfqOtmwQHXLz4uGja5AItd6idkfrEACBtQzai2qQDa+WzV8kqhAsGB1dEs4p0C2zIsbUAAAAA=="},"shape":[10],"dtype":"float64","order":"little"}],["power_law",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/wFQAK//kHw94WQAxEAe6dbZsJC7QNiNf1RdK7ZANZKIU5r+skBB2CfqOtmwQHXLz4uGja5AItd6idkfrEACBtQzai2qQDa+WzV8kqhAsGB1dEs4p0C2zIsbUAAAAA=="},"shape":[10],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"8a279901-c6bc-482e-8e82-b12e5be75a0e","attributes":{"filter":{"type":"object","name":"AllIndices","id":"e5a31bda-4fc9-413b-ac5d-d42f8b97e0de"}}},"glyph":{"type":"object","name":"Line","id":"8b8879f6-9e84-4ea1-977b-22d4ca0e58f9","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"power law"},"line_color":"#30a2da","line_width":2}},"selection_glyph":{"type":"object","name":"Line","id":"b87ddf07-476f-4101-8a86-ffe16da2fc46","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"power law"},"line_color":"#30a2da","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"25463055-7183-4240-85b4-109f70fa3089","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"power law"},"line_color":"#30a2da","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"dfa52ce4-d318-4701-8d9f-06c0e3e2774d","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"index"},"y":{"type":"field","field":"power law"},"line_color":"#30a2da","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"b4e89011-4225-4ed3-93e8-a6bf9256e352","attributes":{"tools":[{"type":"object","name":"WheelZoomTool","id":"353124e4-3386-46b4-8d63-89dc6d37e107","attributes":{"tags":["hv_created"],"renderers":"auto","zoom_together":"none"}},{"type":"object","name":"HoverTool","id":"d1aa6f50-351f-47a2-9188-661b7e074e59","attributes":{"tags":["hv_created"],"renderers":[{"id":"2ccd7ed7-b6ee-4175-bd25-d6a2f0e8fc43"}],"tooltips":[["index","@{index}"],["raw data","@{raw_data}"]],"sort_by":null}},{"type":"object","name":"HoverTool","id":"0c966a28-4dac-4456-a4e0-1a2e0cf91276","attributes":{"tags":["hv_created"],"renderers":[{"id":"b063c0ae-e410-4f70-a9f6-b4cfaaa98de1"}],"tooltips":[["index","@{index}"],["power law","@{power_law}"]],"sort_by":null}},{"type":"object","name":"SaveTool","id":"707719cf-c91e-4891-987d-4d3590d1a0cd"},{"type":"object","name":"PanTool","id":"16e72f19-7506-49c6-9832-a0dc60845cdc"},{"type":"object","name":"BoxZoomTool","id":"9ae0aa1a-cf85-4134-9d64-a4f70e7d77d9","attributes":{"dimensions":"both","overlay":{"type":"object","name":"BoxAnnotation","id":"ad0d72c6-849d-42ea-9817-9e05348f18bc","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"a987cbb4-0ce7-49e9-95e9-9bbf0d0361f4","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"cdf3c4df-0bb3-4605-ba6a-b081e8f2bbdd","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}}}},{"type":"object","name":"ResetTool","id":"b05b1390-4e6f-4ddb-b129-af2b8c4459ca"}],"active_drag":{"id":"16e72f19-7506-49c6-9832-a0dc60845cdc"},"active_scroll":{"id":"353124e4-3386-46b4-8d63-89dc6d37e107"}}},"left":[{"type":"object","name":"LinearAxis","id":"803d85d5-bf5a-4e31-b483-3a90094feb9d","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"a86281b7-b97d-4e4d-8ad7-b461965f37c3","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"09214708-6c95-46e1-b2d0-232bb0307cb0"},"axis_label":"","major_label_policy":{"type":"object","name":"AllLabels","id":"1966e3ba-2102-4d1b-a5d1-08b40e50195d"}}}],"right":[{"type":"object","name":"Legend","id":"24a9de69-2e5e-43b3-8ca7-e5d51ae975da","attributes":{"location":[0,0],"click_policy":"mute","items":[{"type":"object","name":"LegendItem","id":"a02a2bb6-9d92-4780-b4a1-b7efdad7d82c","attributes":{"label":{"type":"value","value":"raw data"},"renderers":[{"id":"2ccd7ed7-b6ee-4175-bd25-d6a2f0e8fc43"}]}},{"type":"object","name":"LegendItem","id":"7163ab85-7d37-4465-9ab5-ba23343bac7a","attributes":{"label":{"type":"value","value":"power law"},"renderers":[{"id":"b063c0ae-e410-4f70-a9f6-b4cfaaa98de1"}]}}]}}],"below":[{"type":"object","name":"LinearAxis","id":"e89d957a-ca72-4029-a159-450a2446bd12","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"8e048918-f99a-4d14-b7b6-f0e68ebc364c","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"9d985bac-8c86-458a-9023-16becb8c8223"},"axis_label":"","major_label_policy":{"type":"object","name":"AllLabels","id":"436efa0a-7661-44ee-98b3-362c56b2dff3"}}}],"center":[{"type":"object","name":"Grid","id":"8460fb21-b870-42d3-92cc-90b5d6671ec5","attributes":{"axis":{"id":"e89d957a-ca72-4029-a159-450a2446bd12"},"grid_line_color":null}},{"type":"object","name":"Grid","id":"2e0d4bff-7be9-4dc5-8db1-7990c8b1a88f","attributes":{"dimension":1,"axis":{"id":"803d85d5-bf5a-4e31-b483-3a90094feb9d"},"grid_line_color":null}}],"min_border_top":10,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"output_backend":"webgl"}},{"type":"object","name":"Spacer","id":"1bcad693-8955-40dd-8690-03119fe54408","attributes":{"name":"HSpacer00322","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"29fa24b4-8001-452f-96d9-2c490eaa61ae"},{"id":"a3d39895-ff87-4719-a6e0-ebb268d71cee"},{"id":"15ab2fe2-0528-4f39-bc43-80064254088d"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}}]}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"start","kind":"Any","default":0},{"name":"end","kind":"Any","default":100},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]},{"type":"model","name":"holoviews.plotting.bokeh.raster.HoverModel","properties":[{"name":"xy","kind":"Any","default":null},{"name":"data","kind":"Any","default":null}]}]}};
  var render_items = [{"docid":"d77b140e-0c7e-484a-9220-c3d3319e7142","roots":{"8f6ecb1b-3675-4c06-9c14-b3afe0be5939":"f886751c-04e4-4e36-9ef0-fb301c7bfad8"},"root_ids":["8f6ecb1b-3675-4c06-9c14-b3afe0be5939"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
	const id_el = document.getElementById(root_id)
	if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
	  const root_el = id_el.children[0]
	  root_el.id = root_el.id + '-rendered'
	  for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
	    child.setAttribute('data-lm-suppress-shortcuts', 'true')
	  }
	}
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
	return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
	  var Bokeh = get_bokeh(root)
	  if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
	  } else {
	    console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
	    embed_document(root)
	  }
        }
      }
    }, 25, root)
  }
})(window);</script></div></div>
</div>
</section>
<section id="exercises">
<h3>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">¶</a></h3>
<div class="admonition-working-effectively-with-dataframes exercise important admonition" id="exercise-2">
<p class="admonition-title">Working effectively with dataframes</p>
<p>Recall the <code class="docutils literal notranslate"><span class="pre">curve_fit()</span></code> method from SciPy discussed above, and imagine that we want to fit powerlaws to every row in a large dataframe. How can this be done effectively?</p>
<p>First define the <code class="docutils literal notranslate"><span class="pre">powerlaw()</span></code> function and another function for fitting a row of numbers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">curve_fit</span>

<span class="k">def</span><span class="w"> </span><span class="nf">powerlaw</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">1.0</span>
    <span class="n">params</span><span class="p">,</span> <span class="n">cov</span> <span class="o">=</span> <span class="n">curve_fit</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">powerlaw</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Next load a dataset with multiple rows similar to the one used in the example above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/ENCCS/hpda-python/main/content/data/results.csv&quot;</span><span class="p">)</span>
<span class="c1"># print first few rows</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Now consider these four different ways of fitting a powerlaw to each row of the dataframe:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Loop</span>

<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_indx</span><span class="p">,</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. `iterrows()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3. `apply()</span>

<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. `apply()` with `raw=True`</span>

<span class="c1"># raw=True passes numpy ndarrays instead of series to fit_powerlaw</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Which one do you think is most efficient? You can measure the execution time by adding <code class="docutils literal notranslate"><span class="pre">%%timeit</span></code> to the first line of a Jupyter code cell. More on timing and profiling in a later episode.</p>
</div>
<div class="admonition-working-effectively-with-dataframes solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Working effectively with dataframes</p>
<p>The execution time for four different methods are described below. Note that you may get different numbers when you run these examples.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1 Loop</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
   <span class="n">row</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_indx</span><span class="p">,</span><span class="mi">1</span><span class="p">:]</span>
   <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
   <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># 33.6 ms ± 682 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. `iterrows()`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row_indx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
   <span class="n">p</span> <span class="o">=</span> <span class="n">fit_powerlaw</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
   <span class="n">powers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># 28.7 ms ± 947 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3. `apply()`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 26.1 ms ± 1.19 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. `apply()` with `raw=True`</span>

<span class="o">%%</span><span class="n">timeit</span>
<span class="n">powers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fit_powerlaw</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 24 ms ± 1.27 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)</span>
</pre></div>
</div>
</div>
<div class="admonition-further-analysis-of-titanic-passenger-list-dataset exercise important admonition" id="exercise-3">
<p class="admonition-title">Further analysis of Titanic passenger list dataset</p>
<p>Consider the titanic dataset.</p>
<blockquote>
<div><p>If you haven’t done so already, load it into a dataframe before the exercises:</p>
<p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span> <span class="pre">as</span> <span class="pre">pd;</span> <span class="pre">url</span> <span class="pre">=</span> <span class="pre">&quot;https://raw.githubusercontent.com/pandas-dev/pandas/master/doc/data/titanic.csv&quot;;</span> <span class="pre">titanic</span> <span class="pre">=</span> <span class="pre">pd.read_csv(url,</span> <span class="pre">index_col=&quot;Name&quot;)</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>Compute the mean age of the first 10 passengers by slicing and the <code class="docutils literal notranslate"><span class="pre">mean</span></code> method</p></li>
<li><p>Using boolean indexing, compute the survival rate (mean of “Survived” values) among passengers over and under the average age.
Now investigate the family size of the passengers (<em>i.e.</em> the “SibSp” column):</p></li>
<li><p>What different family sizes exist in the passenger list?</p>
<ul>
<li><p><strong>Hint</strong>: try the <code class="docutils literal notranslate"><span class="pre">unique()</span></code> method</p></li>
</ul>
</li>
<li><p>What are the names of the people in the largest family group?</p></li>
<li><p>(Advanced) Create histograms showing the distribution of family sizes for passengers split by the fare, i.e. one group of high-fare passengers (where the fare is above average) and one for low-fare passengers</p>
<ul>
<li><p><strong>Hint</strong>: instead of an existing column name, you can give a lambda function as a parameter to <code class="docutils literal notranslate"><span class="pre">hist</span></code> to compute a value on the fly. For example <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">&quot;Poor&quot;</span> <span class="pre">if</span> <span class="pre">titanic[&quot;Fare&quot;].loc[x]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Fare&quot;].mean()</span> <span class="pre">else</span> <span class="pre">&quot;Rich&quot;</span></code>).</p></li>
</ul>
</li>
</ul>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-2">
<p class="admonition-title">Solution</p>
<ol class="arabic simple">
<li><p>Mean age of the first 10 passengers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.iloc[:10,:][&quot;Age&quot;].mean()</span></code> or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.iloc[:10,4].mean()</span></code> or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.loc[:&quot;Nasser,</span> <span class="pre">Mrs.</span> <span class="pre">Nicholas</span> <span class="pre">(Adele</span> <span class="pre">Achem)&quot;,</span> <span class="pre">&quot;Age&quot;].mean()</span></code></p></li>
</ul>
</li>
<li><p>Survival rate among passengers over and under average age:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;Age&quot;]</span> <span class="pre">&gt;</span> <span class="pre">titanic[&quot;Age&quot;].mean()][&quot;Survived&quot;].mean()</span></code> and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;Age&quot;]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Age&quot;].mean()][&quot;Survived&quot;].mean()</span></code></p></li>
</ul>
</li>
<li><p>Existing family sizes: <code class="docutils literal notranslate"><span class="pre">titanic[&quot;SibSp&quot;].unique()</span></code></p></li>
<li><p>Names of members of largest family(ies): <code class="docutils literal notranslate"><span class="pre">titanic[titanic[&quot;SibSp&quot;]</span> <span class="pre">==</span> <span class="pre">8].index</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">titanic.hist(&quot;SibSp&quot;,</span> <span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">&quot;Poor&quot;</span> <span class="pre">if</span> <span class="pre">titanic[&quot;Fare&quot;].loc[x]</span> <span class="pre">&lt;</span> <span class="pre">titanic[&quot;Fare&quot;].mean()</span> <span class="pre">else</span> <span class="pre">&quot;Rich&quot;,</span> <span class="pre">rwidth=0.9)</span></code></p></li>
</ol>
</div>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>NumPy provides a static array data structure, fast mathematical operations for arrays and tools for linear algebra and random numbers</p></li>
<li><p>Pandas dataframes are a good data structure for tabular data</p></li>
<li><p>Dataframes allow both simple and advanced analysis in very compact form</p></li>
<li><p>SciPy contains a lot of interfaces to battle-tested numerical routines</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://uppmax.github.io/R-python-julia-matlab-HPC/">Introduction to running R, Python, Julia, and Matlab in HPC</a></p></li>
<li><p><a class="reference external" href="https://github.com/ENCCS/webinar_documents/tree/main/2024-oct-24-python">Practical Intro to GPU Programming using Python</a></p></li>
<li><p><a class="reference external" href="https://uppmax.github.io/HPC-python/">Using Python in an HPC environment</a></p></li>
<li><p><a class="reference external" href="https://aaltoscicomp.github.io/python-for-scicomp/">Python for Scientific Computing</a></p></li>
<li><p>…</p></li>
</ul>
</div>
</section>
</section>
<span id="document-episodes/Python-HPDA-2-EfficientArrayComputing-pdf"></span><section id="efficient-array-computing-in-pdf">
<h2>Efficient Array Computing (in PDF)<a class="headerlink" href="#efficient-array-computing-in-pdf" title="Link to this heading">¶</a></h2>
<div class="pdfembed"><object style="border:1px solid #666CCC" data="../../_static/slides/efficient-array-computing.pdf" type="application/pdf" height="530vh" width="100%" title="PDF" align="center"><p class="warning">Your browser does not support PDFs. <a href="../../_static/slides/efficient-array-computing.pdf">Download the PDF</a>.</p></object></div><section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading">¶</a></h3>
</section>
</section>
<span id="document-episodes/quiz/quiz_in_episodes"></span><section id="quiz">
<h2>Quiz<a class="headerlink" href="#quiz" title="Link to this heading">¶</a></h2>
<div class="admonition-multiple-choice-single-answer homework important admonition" id="homework-0">
<p class="admonition-title">Multiple choice, single answer</p>
<p>Why are Python lists inefficient for numerical computations?</p>
<ul class="simple">
<li><p>A) They store elements as generic objects with dynamic typing</p></li>
<li><p>B) They are statically typed</p></li>
<li><p>C) They don’t support indexing</p></li>
<li><p>D) They don’t support loops</p></li>
</ul>
<p>What is the main advantage of NumPy arrays (ndarray) over Python lists for numerical tasks?</p>
<ul class="simple">
<li><p>A) They can hold multiple data types</p></li>
<li><p>B) They automatically parallelize loops</p></li>
<li><p>C) They store data in a compact, contiguous block of memory</p></li>
<li><p>D) They have larger memory overhead</p></li>
</ul>
<p>What is “vectorization” in the context of NumPy?</p>
<ul class="simple">
<li><p>A) A way to convert lists to dictionaries</p></li>
<li><p>B) A process of compiling Python code</p></li>
<li><p>C) A plotting technique</p></li>
<li><p>D) Replacing explicit loops with whole-array operations</p></li>
</ul>
<p>How does a pandas DataFrame differ from a NumPy array?</p>
<ul class="simple">
<li><p>A) DataFrames are slower and less powerful</p></li>
<li><p>B) DataFrames support heterogeneous data types and labeled axes</p></li>
<li><p>C) Arrays use less memory</p></li>
<li><p>D) DataFrames cannot be indexed</p></li>
</ul>
<p>What does <code class="docutils literal notranslate"><span class="pre">scipy.optimize.curve_fit()</span></code> do?</p>
<ul class="simple">
<li><p>A) Performs numerical integration</p></li>
<li><p>B) Fits data to a model function</p></li>
<li><p>C) Solves a linear system</p></li>
<li><p>D) Computes a histogram</p></li>
</ul>
</div>
<div class="admonition-coding-questions homework important admonition" id="homework-1">
<p class="admonition-title">Coding questions</p>
<p>Generate a 1D NumPy array of 1 million random floats. Compute the square root of each element using:</p>
<ul class="simple">
<li><p>a) a Python for loop</p></li>
<li><p>b) NumPy’s vectorized np.sqrt</p></li>
</ul>
<p>Load a CSV file of weather data (<em>e.g.</em>, temperature, humidity, wind).</p>
<ul class="simple">
<li><p>a) filter rows where temperature &gt; 30°C</p></li>
<li><p>b) compute the average humidity for each month using <code class="docutils literal notranslate"><span class="pre">groupby</span></code></p></li>
</ul>
<p>Create a random 100×100 matrix A and a vector b.</p>
<ul class="simple">
<li><p>a) use <code class="docutils literal notranslate"><span class="pre">scipy.linalg.solve</span></code> to solve the system $Ax = b$</p></li>
<li><p>b) verify the solution by checking the residual norm</p></li>
</ul>
<p>Simulate a DataFrame with missing values in numerical columns.</p>
<ul class="simple">
<li><p>a) fill missing values with the column mean (using NumPy)</p></li>
<li><p>b) compute basic statistics before and after imputation</p></li>
</ul>
<p>Generate noisy data for a quadratic function $y = ax² + bx + c$</p>
<ul class="simple">
<li><p>a) use <code class="docutils literal notranslate"><span class="pre">scipy.optimize.curve_fit</span></code> to fit the data and recover the original parameters</p></li>
<li><p>b) plot the original <em>vs</em> fitted curve</p></li>
</ul>
</div>
</section>
<span id="document-episodes/ModuleName-1-EpisodeName"></span><section id="your-title-here">
<h2>Your title here<a class="headerlink" href="#your-title-here" title="Link to this heading">¶</a></h2>
<p>Introduction.</p>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>…</p></li>
<li><p>…</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>xx min teaching</p></li>
<li><p>xx min exercises</p></li>
</ul>
</div>
<section id="section-1">
<h3>Section 1<a class="headerlink" href="#section-1" title="Link to this heading">¶</a></h3>
<p>…</p>
<div class="admonition-discussion discussion important admonition" id="discussion-0">
<p class="admonition-title">Discussion</p>
<ul class="simple">
<li><p>…</p></li>
<li><p>…</p></li>
</ul>
</div>
</section>
<section id="section-2">
<h3>Section 2<a class="headerlink" href="#section-2" title="Link to this heading">¶</a></h3>
<p>…</p>
<div class="admonition-demo demo admonition" id="demo-0">
<p class="admonition-title">Demo</p>
<p>…</p>
</div>
<p>…</p>
<div class="admonition-type-along type-along important admonition" id="type-along-0">
<p class="admonition-title">Type-Along</p>
<p>…</p>
</div>
</section>
<section id="section-3">
<h3>Section 3<a class="headerlink" href="#section-3" title="Link to this heading">¶</a></h3>
<p>…</p>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<p>Start with …</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">():</span>
<span class="hll">    <span class="o">...</span>
</span></pre></div>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>You can …</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">:</span>
    <span class="k">pass</span>
    

<span class="k">def</span><span class="w"> </span><span class="nf">foo</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>in conclusion …</p>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>…</p></li>
<li><p>…</p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://example.com">Example link</a></p></li>
</ul>
</div>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-instructor-guide"></span><section id="instructor-guide">
<h2>Instructor guide<a class="headerlink" href="#instructor-guide" title="Link to this heading">¶</a></h2>
<section id="teaching-hours-and-number-of-participants">
<h3>Teaching hours and number of participants<a class="headerlink" href="#teaching-hours-and-number-of-participants" title="Link to this heading">¶</a></h3>
<p>This module is developed for one instructor and two teaching assistants during teaching for 40 students. The teaching can be delivered online, onsite, or in a hybrid format, providing flexibility to accommodate different learning preferences and circumstances. Whether students attend in person or remotely, the course materials and exercises are designed to ensure a consistent and engaging learning experience. Instructors can leverage virtual tools such as video conferencing and shared coding environments alongside traditional classroom setups to support all modes of delivery effectively.</p>
<p>Students are expected to dedicate 2-4 hours in total. This estimate combines contact hours, such as lectures or exercises (1~2 hours), with independent learning time (1-2 hours), which include self-study, assignments, and revision. Balancing these components ensures students have sufficient guided instruction while allowing ample time for personal engagement with the material.</p>
</section>
<section id="mode-of-teaching-and-exercising">
<h3>Mode of teaching and exercising<a class="headerlink" href="#mode-of-teaching-and-exercising" title="Link to this heading">¶</a></h3>
<p>Before teaching this module, the instructor is expected to set up the programming environment on the HPC cluster or assist students with installing the necessary packages on their personal computers. During exercises, instructors may use Jupyter notebooks for demonstrations or copy and paste code examples from the webpage into script files. These scripts can then be executed on students’ personal computers or the HPC cluster, providing a flexible learning experience.</p>
</section>
<section id="hardware-requirements-on-hpc-clusters">
<h3>Hardware requirements on HPC clusters<a class="headerlink" href="#hardware-requirements-on-hpc-clusters" title="Link to this heading">¶</a></h3>
<p>The HPC cluster used for this course should be equipped with modern NVIDIA GPUs that support CUDA programming. It is recommended that the cluster allocates a minimum of 20 GPU hours per person throughout the course duration. This allocation ensures sufficient time for code development, testing, and running computationally intensive workloads. A minimum of 16 GB GPU memory is recommended to handle large datasets and complex computations efficiently.</p>
</section>
</section>
<span id="document-reference-for-learners"></span><section id="reference-for-learners">
<h2>Reference for learners<a class="headerlink" href="#reference-for-learners" title="Link to this heading">¶</a></h2>
<section id="reading-materials-for-further-learning">
<h3>Reading materials for further learning<a class="headerlink" href="#reading-materials-for-further-learning" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://aaltoscicomp.github.io/python-for-scicomp/">Python for Scientific Computing</a></p></li>
<li><p><a class="reference external" href="https://uppmax.github.io/HPC-python/">Using Python in an HPC Environment</a></p></li>
<li><p><a class="reference external" href="https://enccs.github.io/python-perf/">Python Performance Workshop</a></p></li>
<li><p>…</p></li>
</ul>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-reference/structure-evita-module"></span><section id="structure-of-an-evita-module">
<h2>Structure of an EVITA module<a class="headerlink" href="#structure-of-an-evita-module" title="Link to this heading">¶</a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>For a <em>technical overview</em> for authoring such modules, a
<a class="reference external" href="https://sphinx-evita.readthedocs.io/en/latest/ref-for-module-authors.html" title="sphinx-evita">reference for module authors</a> is maintained along with
the documentation for the <code class="docutils literal notranslate"><span class="pre">sphinx-evita</span></code> extension<a class="footnote-reference brackets" href="#ref-auth" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p></li>
<li><p>For <em>best practices</em> in creating great lessons, get inspired by reading a <a class="reference external" href="https://enccs.github.io/instructor-training/lesson-design/" title="ENCCS Instructor Training">primer on lesson design</a><a class="footnote-reference brackets" href="#ref-lesson-design" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p></li>
</ul>
</div>
<p>An EVITA module is a combination of pedagogical material and
working examples of code. These are presented to a learner in
smaller logical units called <em>episodes</em>. The module extensively uses</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html" title="Sphinx 8.3.0">Sphinx</a> as the documentation engine,</p></li>
<li><p><a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/index.html" title="MyST Parser 4.0.1">MyST Parser</a> to parse the content in Markdown and Jupyter notebooks,</p></li>
<li><p><a class="reference external" href="https://coderefinery.github.io/sphinx-lesson/" title="Sphinx-lesson 0.8.19">sphinx-lesson</a> to provide an extended set of markup known as <em>directives</em>, and</p></li>
<li><p><a class="reference external" href="https://sphinx-evita.readthedocs.io/en/latest/index.html" title="sphinx-evita">sphinx-evita</a> to customize the appearance.</p></li>
</ul>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<p>Module developers are expected to provide the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conf.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index.md</span></code></p></li>
<li><p>An episodes directory containing</p>
<ul>
<li><p>Jupyter notebooks preferably (Markdown and reStructuredText files are also acceptable; alternatively slides in ODP/PPTX and PDF pairs)</p></li>
<li><p>Images used in the notebooks</p></li>
<li><p>Longer code examples referenced in the notebooks as stand-alone file (Short code snippets can be described inline).</p></li>
<li><p>Demos and type-along sessions to introduce the topic</p></li>
<li><p>Discussions and exercises designed for <em>formative assessment</em>.</p></li>
</ul>
</li>
<li><p>Questions and quizzes for <em>summative assessment</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instructor-guide.md</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference-for-learners.md</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CITATION.cff</span></code> file</p></li>
</ul>
<p>To sum up a new module is organized as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── CITATION.cff
├── content
│   ├── conf.py
│   ├── episodes
│   │   ├── code
│   │   │   └── code-example.py
│   │   ├── images
│   │   │   └── inline-image-example.png
│   │   ├── ModuleName-1-EpisodeName.md
│   │   ├── ModuleName-2-EpisodeName.ipynb
│   │   ├── ModuleName-3-EpisodeName.md
│   │   └── quiz
│   │       ├── quiz_in_episodes.md
│   │       └── solution_for_quiz_in_episodes.md
│   ├── index.md
│   ├── instructor-guide.md
│   ├── reference-for-learners.md
│   └── _static
│       └── slides
│           ├── slides-3-EpisodeName.pdf
│           └── slides-3-EpisodeName.pptx
├── LICENSE
├── LICENSE.code
├── make.bat
├── Makefile
├── pylock.toml
├── pyproject.toml
└── README.md
</pre></div>
</div>
</section>
<section id="the-conf-py-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file<a class="headerlink" href="#the-conf-py-file" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file contains all the configuration for Sphinx. This
includes details like title, authors, Sphinx extensions and their
configuration. Some comments with <code class="docutils literal notranslate"><span class="pre">FIXME:</span></code> is provided where
appropriate replacements should be made.</p>
</section>
<section id="the-index-md-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">index.md</span></code> file<a class="headerlink" href="#the-index-md-file" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">index.md</span></code> file is the landing page of the course. This should
include:</p>
<ul class="simple">
<li><p>Title of this module</p></li>
<li><p>General description (1–3 paragraphs)</p></li>
<li><p><strong>Prerequisites</strong></p>
<ul>
<li><p>Reading materials or other preparation required before starting this module</p></li>
</ul>
</li>
<li><p>Links to episodes in correct order</p>
<ul>
<li><p>Must use the <a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/syntax/organising_content.html#syntax-toctree" title="MyST Parser 4.0.1">toctree syntax</a></p></li>
<li><p>At least three sections should be included:</p>
<ul>
<li><ol class="arabic simple">
<li><p><strong>Software setup</strong> – instructions for configuring the programming environment</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p><strong>Episodes</strong> – teaching content of the module divided into smaller units called episodes</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="3">
<li><p><strong>Reference</strong> – notes for instructors and additional resources</p></li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Learning outcomes</strong> (following Bloom’s Taxonomy guidelines)<a class="footnote-reference brackets" href="#gpt-learn-out" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p>
<ul>
<li><p>Target learners and practical skills they will gain</p></li>
<li><p><strong>Links to relevant leaves in the skill tree</strong></p></li>
<li><p>Optionally, mention related topics not covered in this module and link them to the skill tree</p></li>
</ul>
</li>
<li><p><strong>Credit</strong> (to be reformulated ASAP)</p></li>
<li><p><strong>License</strong> (to be reformulated ASAP)</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="#document-index"><span class="std std-doc">index.md file</span></a> of this very own module template. You can view the source, by clicking on the <em>eye icon</em> on the top.</p>
</div>
</section>
<section id="episode-on-setting-up-programming-environment">
<h3>Episode on <em>setting up programming environment</em><a class="headerlink" href="#episode-on-setting-up-programming-environment" title="Link to this heading">¶</a></h3>
<p>Provide a dedicated notebook (Markdown or reStructuredText also acceptable) with at least two sessions covering environment setup:</p>
<ul class="simple">
<li><p><strong>Local installation</strong></p>
<ul>
<li><p>Specify package versions (<em>e.g.</em>, via <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> or <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>)</p></li>
<li><p>Detailed setup instructions for Windows, macOS, and Linux users</p></li>
<li><p>Optionally provide a containerized setup</p></li>
</ul>
</li>
<li><p><strong>HPC cluster installation</strong></p>
<ul>
<li><p>Instructions valid for a specific supercomputer (preferably an EuroHPC cluster)</p></li>
<li><p>Specify package versions (as above)</p></li>
<li><p>Optionally provide a containerized setup</p></li>
<li><p>Example SLURM batch script for running exercises</p></li>
</ul>
</li>
<li><p><strong>Datasets</strong></p>
<ul>
<li><p>If a dataset is required and smaller than 100 MB, include it directly</p></li>
<li><p>If larger, provide instructions for downloading it from an external archive</p></li>
</ul>
</li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="#document-episodes/Python-HPDA-0-SoftwareSetup"><span class="std std-doc">setup episode</span></a>.</p>
</div>
</section>
<section id="episodes-for-teaching">
<h3>Episodes for teaching<a class="headerlink" href="#episodes-for-teaching" title="Link to this heading">¶</a></h3>
<p>These episodes are the core content which introduces and goes
deeper into the topic at hand. Each episode should include:</p>
<ul class="simple">
<li><p>A general description</p></li>
<li><p><strong>Objectives</strong> for learners</p></li>
<li><p><strong>Instructor note</strong> (suggested time allocation, code demos, exercises, etc.)</p></li>
<li><p>At least one of the following between major sections:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Discussion</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Code</span> <span class="pre">for</span> <span class="pre">demonstration</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Exercise</span></code> (with corresponding <code class="docutils literal notranslate"><span class="pre">Solution</span></code>)</p></li>
</ul>
</li>
<li><p>Highlighted notifications such as <code class="docutils literal notranslate"><span class="pre">Note</span></code>, <code class="docutils literal notranslate"><span class="pre">Caution</span></code>, <code class="docutils literal notranslate"><span class="pre">Attention</span></code>, <em>etc.</em></p>
<ul>
<li><p>See the Jupyter Notebook titled <strong>Reference for module developers</strong> for more options</p></li>
</ul>
</li>
<li><p><strong>Images</strong> to illustrate key concepts (stored in an images directory)</p></li>
<li><p><strong>Videos</strong> if needed to demonstrate continuous processes</p>
<ul>
<li><p>Videos may be provided directly or linked from YouTube</p></li>
</ul>
</li>
<li><p><strong>Code examples</strong> stored in a code directory, with references in the notebook</p></li>
<li><p><strong>Keypoints</strong> at the end of the episode, summarizing its content</p></li>
<li><p><strong>See also</strong> with additional reading materials</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can look at any of the episodes in this current example module.
If you are starting something new, use
<a class="reference internal" href="#document-episodes/ModuleName-1-EpisodeName"><span class="std std-doc">this boilerplate episode</span></a>.</p>
</div>
</section>
<section id="quiz">
<h3>Quiz<a class="headerlink" href="#quiz" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Provide summative assessment questions suitable for supervised or unsupervised evaluation</p></li>
<li><p>Formats may include:</p>
<ul>
<li><p>Multiple-choice questions</p></li>
<li><p>Coding tasks</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current page on <a class="reference internal" href="#document-episodes/quiz/quiz_in_episodes"><span class="std std-doc">quiz</span></a> is for demonstration purposes only. The format
may change.</p>
</div>
</section>
<section id="instructor-guide">
<h3>Instructor guide<a class="headerlink" href="#instructor-guide" title="Link to this heading">¶</a></h3>
<p>The instructor guide should include:</p>
<ul class="simple">
<li><p>Recommended teaching hours and participant numbers</p></li>
<li><p>Mode of teaching and exercises</p></li>
<li><p>Hardware requirements (including HPC if applicable)</p></li>
<li><p>Learner personas</p></li>
<li><p>Additional teaching recommendations</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="#document-instructor-guide"><span class="std std-doc">instructor guide</span></a> in the current example module.</p>
</div>
</section>
<section id="reference-for-learners">
<h3>Reference for Learners<a class="headerlink" href="#reference-for-learners" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Glossary of terms</p></li>
<li><p>External resources for further study</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="#document-reference-for-learners"><span class="std std-doc">reference for learners</span></a> in the current example module.</p>
</div>
</section>
<section id="the-citation-cff-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">CITATION.cff</span></code> file<a class="headerlink" href="#the-citation-cff-file" title="Link to this heading">¶</a></h3>
<p>This citation file format file encodes metadata such as author
information, affiliation and so on. You are also expected to
tag appropriate skills related to
<a class="reference external" href="https://www.hpc-certification.org/wiki/skill-tree/b">HPC certification forum’s skill tree</a> under the <code class="docutils literal notranslate"><span class="pre">identifiers</span></code> field.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">identifiers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">url</span>
    <span class="n">value</span><span class="p">:</span> <span class="o">&gt;-</span>
      <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">hpc</span><span class="o">-</span><span class="n">certification</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">skill</span><span class="o">-</span><span class="n">tree</span><span class="o">/</span><span class="n">bda</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">6</span><span class="o">/</span><span class="n">b</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">BDA2</span><span class="mf">.6</span> <span class="n">Dask</span>
  <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">url</span>
    <span class="n">value</span><span class="p">:</span> <span class="o">&gt;-</span>
      <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">hpc</span><span class="o">-</span><span class="n">certification</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">skill</span><span class="o">-</span><span class="n">tree</span><span class="o">/</span><span class="n">sd</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">b</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">SD1</span><span class="mf">.1</span> <span class="n">Programming</span> <span class="n">Languages</span>
  <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">url</span>
    <span class="n">value</span><span class="p">:</span> <span class="o">&gt;-</span>
      <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">hpc</span><span class="o">-</span><span class="n">certification</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">skill</span><span class="o">-</span><span class="n">tree</span><span class="o">/</span><span class="n">sd</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">b</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">SD1</span><span class="mf">.3</span> <span class="n">Efficient</span> <span class="n">Algorithms</span> <span class="ow">and</span> <span class="n">Data</span> <span class="n">Structures</span>
  <span class="c1"># - type: doi</span>
  <span class="c1">#   value: 10.1234/zenodo.4321</span>
  <span class="c1">#   description: Module archive on Zenodo</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://citation-file-format.github.io/#/create-a-citationcff-file-now">Citation file format generator</a>.</p>
</div>
</section>
</section>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="ref-auth" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://sphinx-evita.readthedocs.io/en/latest/ref-for-module-authors.html">https://sphinx-evita.readthedocs.io/en/latest/ref-for-module-authors.html</a></p>
</aside>
<aside class="footnote brackets" id="ref-lesson-design" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://enccs.github.io/instructor-training/lesson-design/">https://enccs.github.io/instructor-training/lesson-design/</a></p>
</aside>
<aside class="footnote brackets" id="gpt-learn-out" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>To make an initial draft of the learning outcomes from a course description, authors can use the AI-assisted <a class="reference external" href="https://chatgpt.com/g/g-67768fbf69dc819199207ef9e3d4d697-blooms-taxonomy-for-hpccf/c/68ff9d13-de94-832f-a112-dda046af41b3">Blooms Taxonomy for HPCCF</a> tool.</p>
</aside>
</aside>
</div>
<section id="learning-outcomes">
<h2>Learning outcomes<a class="headerlink" href="#learning-outcomes" title="Link to this heading">¶</a></h2>
<p>This material is for all researchers and engineers who work with large or small datasets and who want to learn powerful tools and best practices for writing more performant, parallelised, robust and reproducible data analysis pipelines.</p>
<p>By the end of this module, learners should:</p>
<ul class="simple">
<li><p>Have a good overview of available tools and libraries for improving performance in Python (<strong>link to leaves in skill tree</strong>)</p></li>
<li><p>Knowing libraries for efficiently storing, reading and writing large data  (<strong>link to leaves in skill tree</strong>)</p></li>
<li><p>Be comfortable working with NumPy arrays and Pandas dataframes for data analysis using Python (<strong>link to leaves in skill tree</strong>)</p></li>
<li><p>…</p></li>
</ul>
<div class="warning admonition">
<p class="admonition-title">Credit</p>
<p>Don’t forget to check out additional <a class="reference external" href="https://www.evitahpc.eu/"><strong>course materials</strong></a> from XXX. Please <a class="reference external" href="https://www.evitahpc.eu/"><strong>contact us</strong></a> if you want to reuse these course materials in your teaching. You can also join the <a class="reference external" href="https://www.evitahpc.eu/"><strong>XXX channel</strong></a> to share your experience and get more help from the community.</p>
</div>
<div class="attention admonition">
<p class="admonition-title">License</p>
<div class="attention dropdown admonition">
<p class="admonition-title">CC BY-SA for media and pedagogical material</p>
<p>Copyright © 2025 XXX. This material is released by XXX under the Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0).</p>
<p><strong>Canonical URL</strong>: <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a></p>
<p><a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/legalcode.en">See the legal code</a></p>
<p class="rubric" id="you-are-free-to">You are free to</p>
<ol class="arabic simple">
<li><p><strong>Share</strong> — copy and redistribute the material in any medium or format for any purpose, even commercially.</p></li>
<li><p><strong>Adapt</strong> — remix, transform, and build upon the material for any purpose, even commercially.</p></li>
<li><p>The licensor cannot revoke these freedoms as long as you follow the license terms.</p></li>
</ol>
<p class="rubric" id="under-the-following-terms">Under the following terms</p>
<ol class="arabic simple">
<li><p><strong>Attribution</strong> — You must give <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/#ref-appropriate-credit">appropriate credit</a> , provide a link to the license, and <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/#ref-indicate-changes">indicate if changes were made</a> . You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</p></li>
<li><p><strong>ShareAlike</strong> — If you remix, transform, or build upon the material, you must distribute your contributions under the <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/#ref-same-license">same license</a> as the original.</p></li>
<li><p><strong>No additional restrictions</strong> — You may not apply legal terms or <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/#ref-technological-measures">technological measures</a> that legally restrict others from doing anything the license permits.</p></li>
</ol>
<p class="rubric" id="notices">Notices</p>
<p>You do not have to comply with the license for elements of the material in the public domain or where your use is permitted by an applicable <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/deed.en#ref-exception-or-limitation">exception or limitation</a> .</p>
<p>No warranties are given. The license may not give you all of the permissions necessary for your intended use. For example, other rights such as <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/deed.en#ref-publicity-privacy-or-moral-rights">publicity, privacy, or moral rights</a> may limit how you use the material.</p>
<p>This deed highlights only some of the key features and terms of the actual license. It is not a license and has no legal value. You should carefully review all of the terms and conditions of the actual license before using the licensed material.</p>
</div>
<div class="attention dropdown admonition">
<p class="admonition-title">MIT for source code and code snippets</p>
<p>MIT License</p>
<p>Copyright (c) 2025, EVITA project, Ashwin Vishnu Mohanan, Claudia Blaas-Schenner, Jaison Lewis, Jasper Seehofer, Kevin Lüdemann, Kjartan Thor Wikfeldt, Mary Kate Chessey, Matthias Eulert, Tobias Haas, Victoria Döller, Yinyin Ma, and Yonglei Wang</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>To module authors</em>: For code you may use any OSI-approved license as mentioned in <a class="reference external" href="https://spdx.org/licenses/">https://spdx.org/licenses/</a>, such as Apache License 2.0, GNU GPLv3, MIT. Please make sure to update the deed above and
<code class="docutils literal notranslate"><span class="pre">LICENSE.code</span></code> file accordingly.</p>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, EVITA project, Ashwin Vishnu Mohanan, Claudia Blaas-Schenner, Jaison Lewis, Jasper Seehofer, Kevin Lüdemann, Kjartan Thor Wikfeldt, Mary Kate Chessey, Matthias Eulert, Tobias Haas, Victoria Döller, Yinyin Ma, and Yonglei Wang
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <p class="caption" role="heading"><span class="caption-text">Software setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-0-SoftwareSetup">Setting Up Programming Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-1-Motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing">Efficient Array Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing-markdown">Efficient Array Computing (in Markdown)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/Python-HPDA-2-EfficientArrayComputing-pdf">Efficient Array Computing (in PDF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/quiz/quiz_in_episodes">Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-episodes/ModuleName-1-EpisodeName">Your title here</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-instructor-guide">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-reference-for-learners">Reference for learners</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Walkthrough for module authors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-reference/structure-evita-module">Structure of an EVITA module</a></li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=d6d90d09"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=35a8b989"></script>
    <script src="_static/minipres.js?v=a0d29692"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>